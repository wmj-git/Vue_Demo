{"version":3,"sources":["webpack:///./src/utils/content.js","webpack:///./src/utils/ol/fn.js","webpack:///./src/utils/ol/index.js","webpack:///./src/utils/ol/baseMap.js","webpack:///src/views/map/map.vue","webpack:///./src/views/map/map.vue?4fa7","webpack:///./src/views/map/map.vue","webpack:///./src/api/geom.js","webpack:///./src/api/marker.js","webpack:///./src/api/tree.js"],"names":["__webpack_exports__","OBJ","_content","type","content","id","_OBJ","oilDetectiveContent","populationDetectiveContent","airDetectiveContent","fireAlertContent","roadAddressContent","districtContent","protectCompanyContent","$","dataUrl","_Key","_clusterImgUrl","_distance","_featureKey","titleKey","iconUrl","k","_data","url","encodeURIComponent","ajax","async","dataType","success","response","console","log","error","message","details","join","features","forEach","feature","push","ol","format","EsriJSON","vectorSource","source","Vector","wrapX","clusterSource","Cluster","distance","styleCache","layer","name","layer_type","style","size","get","length","Style","image","Icon","anchor","anchorXUnits","anchorYUnits","opacity","scale","color","src","text","Text","toString","fill","Fill","originalFeature","offsetX","offsetY","stroke","Stroke","width","_features","_geomStyle","geomType","_geomKey","strokeWidth","strokeColor","fillColor","i","coordinates","gpsLongitude","gpsLatitude","Feature","geometry","geom","Point","featureData","setStyle","createQeomStyle","LineString","Polygon","radius","circleIn3857","Circle","proj","transform","circleIn4326","setId","addFeatures","_clusterColor","iconUrlKey","clusterLayer","emMap","__WEBPACK_IMPORTED_MODULE_0__store__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_1__utils_vueBus__","__WEBPACK_IMPORTED_MODULE_2__content__","formatDegree","pValue","value","Math","abs","v1","floor","round","_feature","_style","_fillColor","JSON","parse","_strokeColor","_name","this","el","resolutions","map","view","Info","InfoOverlay","coordinate_container","coordinate_content","coordinate_closer","coordinate_overlay","measureSource","measureVector","helpTooltip_Overlays","measureTooltip_Overlays","sketch","helpTooltipElement","helpTooltip","measureTooltipElement","measureTooltip","continuePolygonMsg","continueLineMsg","measure_draw","prototype","init","_LngLat","_layers","_this","_resolutions","View","center","zoom","maxZoom","minZoom","projection","Map","controls","control","defaults","attribution","rotate","extend","target","layers","on","e","_map","_extent","getView","calculateExtent","getSize","_zoom","extent","getCenter","getZoom","getLayers","getArray","_layer","_source","getSource","setDistance","append","document","getElementById","Overlay","element","positioning","stopEvent","offset","autoPan","autoPanAnimation","duration","addOverlay","InfoPointermoveFn","InfoClickFn","addLayer","viewFn","_num","_center","animate","evt","_mapNmame","store","getters","window","forEachFeatureAtPixel","pixel","_type","_featureData","getId","split","vueBus","$emit","fn","_Info","dragging","hide","getEventPixel","originalEvent","hit","hasFeatureAtPixel","css","_coordinate","coordinate","infoFn","lng","lat","contentFN","html","show","setPosition","coordinateLisen","_coordinateContent","_coordinateOverlay","toStringHDMS","toLonLat","innerHTML","coordinateOnFn","onclick","undefined","blur","coordinateOffFn","remove","removeOverlay","un","pointerMoveHandler","_helpTooltipElement","_helpTooltip","_continuePolygonMsg","_continueLineMsg","helpMsg","getGeometry","classList","formatLength","line","sphere","getLength","formatArea","polygon","area","getArea","addInteraction","interaction","Draw","lineDash","createMeasureTooltip","createHelpTooltip","listener","tooltipCoord","output","getInteriorPoint","getCoordinates","getLastCoordinate","className","setOffset","Observable","unByKey","parentNode","removeChild","createElement","measureOn","removeInteraction","measureOff","_obj","measureClear","clear","utils_ol","db","openScene","mapName","baseMapFN","forEachPoint","func","input","opt_output","opt_dimension","len","dimension","slice","Array","sphericalMercator","RAD_PER_DEG","PI","forward","max","min","sin","inverse","atan","exp","baiduMercator","MCBAND","LLBAND","MC2LL","LL2MC","convertor","table","px","py","x","d","y","v","j","getLoop","y_abs","gcj02","AXIS","OFFSET","delta","wgLon","wgLat","ret","dLat","sqrt","dLon","transformLon","radLat","magic","sqrtMagic","cos","outOfChina","lon","toWGS84","deltaD","fromWGS84","bd09","X_PI","toGCJ02","z","theta","atan2","fromGCJ02","projzh","ll2smerc","smerc2ll","baiduMercatorProj","Projection","code","applyTransform","ll2bmerc","units","addProjection","addCoordinateTransforms","bmerc2ll","smerc2bmerc","bmerc2smerc","bmercResolutions","pow","baidu_vec","Tile","XYZ","tileUrlFunction","tileCoord","tileGrid","tilegrid","TileGrid","origin","tileSize","baidu_img","baidu_cva","crtLayerWMTS","tk","projectionExtent","getExtent","getWidth","matrixIds","WMTS","attributions","substr","matrixSet","substring","getTopLeft","tLayer_vec","tLayer_img","osmLayer_vec","osmLayer_img","layerFN","clustersFn","clustersLayerFn","data","props","methods","mapInit","layerInit","_url","Object","tools","_Tabs","$store","_tab","addTab","spaceTimeBaseMap","obj","_origin","toScene","zIndex","ESRICache","spaceTimeData","data_url","layer_name","_iconUrl","data_maker_iconUrl","_titleKey","maker_titleKey","_clustersColor","clusters_color","baseMapFn","removeLayer","layerName","xyz","trigger","measure_drawPloy","measure_drawLine","measure_clear","_zIndex","_lng","_lat","setZIndex","scene_data","data_type","queryVicinityPrintFn","geomDataFn","bus","title","layer_title","markerDataFn","_this2","_val","tree","params","longitude","latitude","then","statusCode","icon","_this3","api_name","_k","_params","marker","treeData","treeChildren","treeLabel","_this4","geom_style","geom_titleKey","_k2","_coordinates","_data2","_coordinates2","created","commit","control_type","control_id","mounted","_this5","$on","beforeDestroy","$off","map_map","render","_h","$createElement","_c","_self","staticClass","attrs","staticRenderFns","Component","normalizeComponent","ssrContext","request","method","__WEBPACK_IMPORTED_MODULE_0__utils_request__"],"mappings":"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","file":"static/js/1.199f0314cc2aeffe9b2e.js","sourcesContent":["//特殊树木分布\nfunction TreeDistributionContent(_OBJ) {\n\n  let obj = _OBJ.content;\n  let _content = '<ul type=\"none\" style=\"margin: 0px;padding:0px;font-size:22px;\" >' +\n    '<li>特殊树木分布<\\/li>'+\n    '<li>编号：' + (obj.id || \"\") + '<\\/li>' +\n    '<\\/ul>';\n\n  return _content;\n}\n//土壤监测\nfunction oilDetectiveContent(_OBJ) {\n\n  let obj = _OBJ.content;\n  let _content = '<ul type=\"none\" style=\"margin: 0px;padding:0px;font-size:22px;\" >' +\n    '<li>土壤监测<\\/li>'+\n    '<li>编号：' + (obj.id || \"\") + '<\\/li>' +\n    '<\\/ul>';\n\n  return _content;\n}\n//人流量监测\nfunction populationDetectiveContent(_OBJ) {\n\n  let obj = _OBJ.content;\n  let _content = '<ul type=\"none\" style=\"margin: 0px;padding:0px;font-size:22px;\" >' +\n    '<li>人流量监测<\\/li>'+\n    '<li>编号：' + (obj.id || \"\") + '<\\/li>' +\n    '<\\/ul>';\n\n  return _content;\n}\n//空气监测\nfunction airDetectiveContent(_OBJ) {\n\n  let obj = _OBJ.content;\n  let _content = '<ul type=\"none\" style=\"margin: 0px;padding:0px;font-size:22px;\" >' +\n    '<li>空气监测<\\/li>'+\n    '<li>编号：' + (obj.id || \"\") + '<\\/li>' +\n    '<\\/ul>';\n\n  return _content;\n}\n//火灾报警\nfunction fireAlertContent(_OBJ) {\n\n  let obj = _OBJ.content;\n  let _content = '<ul type=\"none\" style=\"margin: 0px;padding:0px;font-size:22px;\" >' +\n    '<li>火灾报警<\\/li>'+\n    '<li>编号：' + (obj.id || \"\") + '<\\/li>' +\n    '<\\/ul>';\n\n  return _content;\n}\n//道路地址\nfunction roadAddressContent(_OBJ) {\n\n  let obj = _OBJ.content;\n  let _content = '<ul type=\"none\" style=\"margin: 0px;padding:0px;font-size:22px;\" >' +\n    '<li>道路地址<\\/li>' +\n    '<li>编号：' + (obj.id || \"\") + '<\\/li>' +\n    '<\\/ul>';\n\n  return _content;\n}\n//行政区划\nfunction districtContent(_OBJ) {\n\n  let obj = _OBJ.content;\n  let _content = '<ul type=\"none\" style=\"margin: 0px;padding:0px;font-size:22px;\" >' +\n    '<li>行政区划<\\/li>' +\n    '<li>编号：' + (obj.id || \"\") + '<\\/li>' +\n    '<\\/ul>';\n\n  return _content;\n}\n//养护单位\nfunction protectCompanyContent(_OBJ) {\n\n  let obj = _OBJ.content;\n  let _content = '<ul type=\"none\" style=\"margin: 0px;padding:0px;font-size:22px;\" >' +\n    '<li>养护单位<\\/li>' +\n    '<li>编号：' + (obj.id || \"\") + '<\\/li>' +\n    '<\\/ul>';\n\n  return _content;\n}\n\nexport function contentFN(OBJ) {\n\n  let _content;\n  switch (OBJ.type) {\n    case \"TreeDistribution\"://特殊树木分布\n      _content = TreeDistributionContent(OBJ);\n      break;\n    case \"oilDetective\"://土壤监测\n      _content = oilDetectiveContent(OBJ);\n      break;\n    case \"populationDetective\"://人流量监测\n      _content = populationDetectiveContent(OBJ);\n      break;\n    case \"airDetective\"://空气监测\n      _content = airDetectiveContent(OBJ);\n      break;\n    case \"fireAlert\"://火灾报警\n      _content = fireAlertContent(OBJ);\n      break;\n    case \"roadAddress\"://道路地址\n      _content = roadAddressContent(OBJ);\n      break;\n    case \"district\"://行政区划\n      _content = districtContent(OBJ);\n      break;\n    case \"protectCompany\"://养护单位\n      _content = protectCompanyContent(OBJ);\n      break;\n    default:\n      _content = '<span style=\"color: white;\">无数据<\\/span>';\n  }\n  return _content;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/content.js","import store from '@/store'\nimport vueBus from '@/utils/vueBus'\nimport {contentFN} from '../content'\n\n//经纬度换算\nfunction formatDegree(pValue) {\n  var value = Math.abs(pValue);\n  var v1 = Math.floor(value);\n  var v2 = Math.floor((value - v1) * 60);\n  var v3 = Math.round((value - v1) * 3600 % 60);\n  return v1 + '°' + v2 + '\\'' + v3 + '\"';\n}\n\n\nexport function createQeomStyle(_feature, _style) {\n  let Style = null;\n  let _fillColor = JSON.parse(_style.fillColor);\n  let _strokeColor = JSON.parse(_style.strokeColor);\n  _fillColor[3] = _fillColor[3] / 255;\n  _strokeColor[3] = _strokeColor[3] / 255;\n  switch (_style.type) {\n    case \"1\":\n      Style = new ol.style.Style({\n        stroke: new ol.style.Stroke({\n          width: _style.strokeWidth,\n          color: _strokeColor\n        }),\n        fill: new ol.style.Fill({\n          color: _fillColor,\n          // color: 'rgba('+_color[0]+', '+_color[1]+', '+_color[2]+', '+_color[3]+')'\n        }),\n        text: new ol.style.Text({\n          text: _feature[_style.titleKey] ? _feature[_style.titleKey] + \"\" : \"\",\n          offsetX: 0,\n          offsetY: -28,\n          fill: new ol.style.Fill({\n            color: '#fff'\n          }),\n          stroke: new ol.style.Stroke({\n            color: 'rgba(0, 0, 0, 0.6)',\n            width: 4\n          }),\n        })\n      });\n      break;\n    case \"2\"://text形式\n      Style = new ol.style.Style({\n        text: new ol.style.Text({\n          text: _feature[_style.titleKey] ? _feature[_style.titleKey] + \"\" : \"\",\n          fill: new ol.style.Fill({\n            color: JSON.parse(_style.fillColor)\n          }),\n          stroke: new ol.style.Stroke({\n            color: JSON.parse(_style.strokeColor),\n            width: _style.strokeWidth\n          }),\n        })\n      });\n      break;\n\n  }\n  return Style;\n}\n\n//获取时空云数据\nexport function clustersLayerFn(dataUrl, _Key, _clusterImgUrl, _distance) {//时空云数据\n  // let _extent = [113.97796915, 22.608145238000002, 114.04398656100001, 22.704755608];\n\n  let _featureKey = {\n    type: \"typeName\",//类型\n    titleKey: \"id\",//标题\n    iconUrl: \"\"//图标地址\n  };\n  for (let k in _featureKey) {\n    if (_Key[k]) {\n      _featureKey[k] = _Key[k];\n    }\n  }\n  let _url = dataUrl ? dataUrl : \"\";\n\n//读取时空运部件数据=======================================================\n\n  let _data = [];\n  let url = _url + '/query/?f=json&MaxRecordCount=20000&' +\n    'returnGeometry=true&spatialRel=esriSpatialRelIntersects&geometry=' +\n    encodeURIComponent('{\"xmin\":' + -180 + ',\"ymin\":' + -90 + ',' +\n      '\"xmax\":' + 180 + ',\"ymax\":' + 90 +\n      ',\"spatialReference\":{\"wkid\":4490}}') +\n    '&geometryType=esriGeometryEnvelope&inSR=4490&outFields=*' +\n    '&outSR=4490';\n  $.ajax({\n    url: url, async: true, dataType: 'json', success: function (response) {\n      console.log(\"response\");\n      console.log(response);\n      if (response.error) {\n        console.log(response.error.message + '\\n' +\n          response.error.details.join('\\n'));\n      } else {\n        response.features.forEach(function (feature) {\n          _data.push(feature);\n        });\n        console.log(_data);\n      }\n    }\n  });\n\n\n\n/*  let urlLayer = _url + '/layers/?f=json';\n  let _layers = null;\n  let _data = [];\n  $.ajax({\n    url: urlLayer, async: false, dataType: 'json', success: function (response) {\n      console.log(\"layers\");\n      console.log(response);\n      if (response.error) {\n        console.log(response.error.message + '\\n' +\n          response.error.details.join('\\n'));\n      } else {\n        _layers = response.layers;\n      }\n    }\n  });\n  console.log(_layers);\n\n  for (let i = 0; i < _layers.length; i++) {\n\n    let url = _url + '/' + i + '/query/?f=json&' +\n      'returnGeometry=true&spatialRel=esriSpatialRelIntersects&geometry=' +\n      encodeURIComponent('{\"xmin\":' + -180 + ',\"ymin\":' + -90 + ',' +\n        '\"xmax\":' + 180 + ',\"ymax\":' + 90 +\n        ',\"spatialReference\":{\"wkid\":4490}}') +\n      '&geometryType=esriGeometryEnvelope&inSR=4490&outFields=*' +\n      '&outSR=4490';\n    $.ajax({\n      url: url, async: true, dataType: 'json', success: function (response) {\n        console.log(\"response\");\n        console.log(response);\n        if (response.error) {\n          console.log(response.error.message + '\\n' +\n            response.error.details.join('\\n'));\n        } else {\n          response.features.forEach(function (feature) {\n            _data.push(feature);\n          });\n          console.log(_data);\n        }\n      }\n    });\n  }*/\n//=======================================================\n\n  let esrijsonFormat = new ol.format.EsriJSON();\n  let vectorSource = new ol.source.Vector({\n      /* loader: function (extent, resolution, projection) {\n\n         var urlLayer = _url + '/layers/?f=json';\n         if (vectorSource.getFeatures().length > 0) {\n           vectorSource.clear();\n           console.log(vectorSource.getFeatures().length);\n           return\n         }\n\n         let _layers = null;\n         let _data = [];\n         console.log(_url);\n         $.ajax({\n           url: urlLayer, async: false, dataType: 'json', success: function (response) {\n             console.log(\"layers\");\n             console.log(response);\n             if (response.error) {\n               console.log(response.error.message + '\\n' +\n                 response.error.details.join('\\n'));\n             } else {\n               _layers = response.layers;\n             }\n           }\n         });\n         console.log(_layers);\n\n         for(let i=0;i<_layers.length;i++){\n\n           let url = _url + '/'+i+'/query/?f=json&' +\n             'returnGeometry=true&spatialRel=esriSpatialRelIntersects&geometry=' +\n             encodeURIComponent('{\"xmin\":' + -180 + ',\"ymin\":' + -90 + ',' +\n               '\"xmax\":' + 180 + ',\"ymax\":' + 90 +\n               ',\"spatialReference\":{\"wkid\":4490}}') +\n             '&geometryType=esriGeometryEnvelope&inSR=4490&outFields=*' +\n             '&outSR=4490';\n           $.ajax({\n             url: url, async: true, dataType: 'json', success: function (response) {\n               console.log(\"response\");\n               console.log(response);\n               if (response.error) {\n                 console.log(response.error.message + '\\n' +\n                   response.error.details.join('\\n'));\n               } else {\n                 // dataProjection will be read from document\n                 var features = esrijsonFormat.readFeatures(response, {\n                   featureProjection: projection\n                 });\n                 console.log(projection);\n                 console.log(features);\n                 if (features.length > 0) {\n                   console.log(\"features2\");\n                   _data.push(features);\n                   vectorSource.addFeatures(features);\n                 }\n                 console.log(_data);\n                 /!*if (features.length > 0) {\n                   let _DATA = [];\n                   features.forEach(function (feature) {\n                     feature.setId(_featureKey.type + \"_\" + feature.get(_featureKey.titleKey));\n                     let _keys = feature.getKeys();\n                     let _featureData = {};\n                     _keys.forEach(function (_key) {\n\n                       if (_key === \"geometry\") {\n\n                       } else {\n                         _featureData[_key] = feature.get(_key);\n                       }\n                     });\n                     _featureData[\"coordinates\"] = feature.get(\"geometry\").getCoordinates();\n                     feature.set(\"featureData\", _featureData);\n                     _DATA.push(_featureData);\n                   });\n                   console.log(\"features2\");\n                   // console.log(features);\n                   console.log(_DATA);\n                   vectorSource.addFeatures(features);\n\n                 }*!/\n               }\n             }\n           });\n         }\n\n       },*/\n    /* strategy: ol.loadingstrategy.tile(ol.tilegrid.createXYZ({\n       tileSize: 512\n     })),*/\n    wrapX: false\n  });\n\n\n  let clusterSource = new ol.source.Cluster({\n    distance: _distance,\n    source: vectorSource\n  });\n\n  function createEarthquakeStyle(iconFeature) {\n\n    // console.log(iconFeature.getKeys());\n\n\n    let _data = iconFeature.get(_featureKey.titleKey);\n\n    let iconStyle = new ol.style.Style({\n      image: new ol.style.Icon(({\n        anchor: [0, 0],\n        anchorXUnits: 'fraction',\n        anchorYUnits: 'pixels',\n        scale: 0.4,\n        src: _featureKey.iconUrl + \"\"\n      })),\n      text: new ol.style.Text({\n        text: _data + \"\",\n        // text:  \"123\",\n        offsetX: 12,\n        offsetY: -8,\n        fill: new ol.style.Fill({\n          color: '#fff'\n        }),\n        stroke: new ol.style.Stroke({\n          color: 'rgba(0, 0, 0, 0.6)',\n          width: 4\n        }),\n      })\n    });\n\n    return iconStyle;\n  }\n\n  let styleCache = {};\n  let layer = new ol.layer.Vector({\n    name: _featureKey.type + \"_layer\",\n    layer_type: \"Cluster\",\n    source: clusterSource,\n    style: function (feature) {\n      var size = feature.get('features').length;\n      // console.log(feature.get('features'));\n      var style = styleCache[size];\n      if (size > 1) {\n        if (!style) {\n          style = new ol.style.Style({\n            image: new ol.style.Icon(({\n              anchor: [0.5, 28],\n              anchorXUnits: 'fraction',\n              anchorYUnits: 'pixels',\n              opacity: 0.8,\n              scale: 1.28,\n              color: _clusterImgUrl,\n              src: \"../../static/image/cluster.png\"\n            })),\n            text: new ol.style.Text({\n              text: size.toString(),\n              fill: new ol.style.Fill({\n                color: '#fff'\n              })\n            })\n          });\n          styleCache[size] = style;\n        }\n      } else {\n        var originalFeature = feature.get('features')[0];\n        style = createEarthquakeStyle(originalFeature);\n      }\n      return style;\n    }\n  });\n\n  return {\n    layer, vectorSource, clusterSource\n  }\n}\n\n//几何类型没有聚合的数据图层\nexport function layerFN(_features, _Key, _geomStyle) {\n\n  let features = [];\n  let source = null;\n  let layer = null;\n\n  let _featureKey = {\n    type: \"layerName\",//类型\n    geomType: \"Point\",//几何对象类型\n  };\n  for (let k in _featureKey) {\n    if (_Key[k]) {\n      _featureKey[k] = _Key[k];\n    }\n  }\n\n  let _geomKey = {\n    type: \"\",//样式类型\n    titleKey: \"id\",//标题\n    strokeWidth: 2,\n    strokeColor: \"[255, 0, 0, 1.0]\",\n    fillColor: \"[0, 0, 255, 1.0]\"\n  };\n  for (let k in _geomKey) {\n    if (_geomStyle[k]) {\n      _geomKey[k] = _geomStyle[k];\n    }\n  }\n\n\n  source = new ol.source.Vector({\n    wrapX: false\n  });\n\n\n  console.log(_features);\n  for (let i = 0; i < _features.length; ++i) {\n\n    if (_featureKey.geomType === \"point\") {//点\n      let coordinates = [_features[i].gpsLongitude, _features[i].gpsLatitude];\n      features[i] = new ol.Feature({\n        geometry: new ol.geom.Point(coordinates),\n        featureData: _features[i]\n      });\n    } else if (_featureKey.geomType === \"text\") {//文本\n      let coordinates = [_features[i].gpsLongitude, _features[i].gpsLatitude];\n      features[i] = new ol.Feature({\n        geometry: new ol.geom.Point(coordinates),\n        featureData: _features[i]\n      });\n      features[i].setStyle(createQeomStyle(_features[i], _geomKey));\n    } else if (_featureKey.geomType === \"line\") {//线\n\n      let coordinates = _features[i].coordinates ? _features[i].coordinates : [];\n      features[i] = new ol.Feature({\n        geometry: new ol.geom.LineString(coordinates),\n        featureData: _features[i]\n      });\n      features[i].setStyle(createQeomStyle(_features[i], _geomKey));\n    } else if (_featureKey.geomType === \"polygon\") {//多边形\n      let coordinates = _features[i].coordinates ? _features[i].coordinates : [];\n      features[i] = new ol.Feature({\n        geometry: new ol.geom.Polygon(coordinates),\n        featureData: _features[i]\n      });\n      features[i].setStyle(createQeomStyle(_features[i], _geomKey));\n    } else if (_featureKey.geomType === \"circle\") {//圆\n      let coordinates = [_features[i].gpsLongitude, _features[i].gpsLatitude];\n      let radius = _features[i].radius ? _features[i].radius : 10;\n      let circleIn3857 = new ol.geom.Circle(ol.proj.transform(coordinates, 'EPSG:4326', 'EPSG:3857'), radius, 'XY');\n      let circleIn4326 = circleIn3857.transform('EPSG:3857', 'EPSG:4326');\n\n      features[i] = new ol.Feature({\n        geometry: circleIn4326,\n        featureData: _features[i]\n      });\n\n      features[i].setStyle(createQeomStyle(_features[i], _geomKey));\n    }\n\n    features[i].setId(_featureKey.geomType + \"_\" + _featureKey.type + \"_\" + _features[i].id);\n  }\n\n\n  source.addFeatures(features);\n  layer = new ol.layer.Vector({\n    name: _featureKey.type + \"_layer\",\n    layer_type: \"Layer\",\n    source: source\n  });\n\n  return {\n    features: features,\n    source: source,\n    layer: layer\n  }\n}\n\n\n//有聚合的数据图层\nexport function clustersFn(_features, _Key, _clusterColor, _distance) {//_features:数据, _Key:属性配置, _clusterImgUrl:聚合图标\n\n  /* _features=[{\n            id:\"\",\n            lng:\"\",\n            lat:\"\",\n            _Key.iconUrlKey:\"\",\n            ...\n   }]*/\n\n  let _featureKey = {\n    type: \"typeName\",//类型\n    titleKey: \"id\",//标题\n    iconUrlKey: \"iconUrl\"//图标地址\n  };\n  for (let k in _featureKey) {\n    if (_Key[k]) {\n      _featureKey[k] = _Key[k];\n    }\n  }\n\n  let features = [];\n  for (let i = 0; i < _features.length; ++i) {\n    let coordinates = [_features[i].gpsLongitude, _features[i].gpsLatitude];\n\n    features[i] = new ol.Feature({\n      geometry: new ol.geom.Point(coordinates),\n      featureData: _features[i]\n    });\n    features[i].setId(\"marker_\" + _featureKey.type + \"_\" + _features[i].id);\n  }\n\n  let clusterSource = new ol.source.Cluster({\n    distance: _distance,\n    source: new ol.source.Vector({\n      features: features\n    })\n  });\n\n  function createEarthquakeStyle(iconFeature) {\n\n    // console.log(iconFeature.get(\"featureData\")[_iconKey]);\n    let _data = iconFeature.get(\"featureData\");\n    let iconStyle = new ol.style.Style({\n      image: new ol.style.Icon(({\n        anchor: [32, 62],\n        anchorXUnits: 'pixels',\n        anchorYUnits: 'pixels',\n        scale: 0.4,\n        src: _data[_featureKey.iconUrlKey] + \"\"\n      })),\n      text: new ol.style.Text({\n        text: _data[_featureKey.titleKey] + \"\",\n        offsetX: 0,\n        offsetY: -32,\n        fill: new ol.style.Fill({\n          color: '#fff'\n        }),\n        stroke: new ol.style.Stroke({\n          color: 'rgba(0, 0, 0, 0.6)',\n          width: 4\n        }),\n      })\n    });\n\n    return iconStyle;\n  }\n\n  let styleCache = {};\n  let clusterLayer = new ol.layer.Vector({\n    name: _featureKey.type + \"_layer\",\n    layer_type: \"Cluster\",\n    source: clusterSource,\n    style: function (feature) {\n      var size = feature.get('features').length;\n      var style = styleCache[size];\n      if (size > 1) {\n        if (!style) {\n          style = new ol.style.Style({\n            image: new ol.style.Icon(({\n              anchor: [0.5, 28],\n              anchorXUnits: 'fraction',\n              anchorYUnits: 'pixels',\n              opacity: 0.8,\n              scale: 1.28,\n              color: _clusterColor,\n              src: \"../../static/image/cluster.png\"\n            })),\n            text: new ol.style.Text({\n              text: size.toString(),\n              fill: new ol.style.Fill({\n                color: '#fff'\n              })\n            })\n          });\n          styleCache[size] = style;\n        }\n      } else {\n        // clusterSource.setDistance(0);\n        var originalFeature = feature.get('features')[0];\n        // console.log(originalFeature);\n        style = createEarthquakeStyle(originalFeature);\n      }\n      return style;\n    }\n  });\n\n  return {\n    features: features,\n    source: clusterSource,\n    layer: clusterLayer\n  }\n\n}\n\n\nexport function emMap(_name) {\n  this.el = _name;\n  this.resolutions = [//影像图范围\n    5.9486525145757E-4, 2.97432625728785E-4,\n    1.5228550437313792E-4, 7.614275218656896E-5,\n    3.807137609328448E-5, 1.903568804664224E-5,\n    9.51784402332112E-6, 4.75892201166056E-6,\n    2.37946100583028E-6, 1.18973050291514E-6,\n    5.9486525145757E-7, 2.97432625728785E-7];\n\n  this.map = null;\n  this.view = null;\n  // 信息框\n  this.Info = null;\n  this.InfoOverlay = null;\n\n  // 坐标\n  this.coordinate_container = null;\n  this.coordinate_content = null;\n  this.coordinate_closer = null;\n  this.coordinate_overlay = null;\n\n  //测量\n  this.measureSource = null;\n  this.measureVector = null;\n  this.helpTooltip_Overlays = [];\n  this.measureTooltip_Overlays = [];\n  this.sketch = null;\n  this.helpTooltipElement = null;\n  this.helpTooltip = null;\n  this.measureTooltipElement = null;\n  this.measureTooltip = null;\n  this.continuePolygonMsg = '测量面积';\n  this.continueLineMsg = '测量距离';\n  this.measure_draw = null;\n\n}\n\nemMap.prototype.init = function (_LngLat, _layers) {\n\n  let _this = this;\n  let _resolutions = this.resolutions;\n  this.view = new ol.View({\n    resolutions: _resolutions,\n    center: _LngLat,\n    zoom: 1,\n    maxZoom: 19,\n    minZoom: 0,\n    projection: 'EPSG:4326',\n  });\n  this.map = new ol.Map({\n    controls: ol.control.defaults({attribution: false, zoom: false, rotate: true}).extend([\n      //new ol.control.LayerSwitcher({ trash: false, extent: true }),\n      //new ol.control.ScaleLine(),\n      //new ol.control.Zoom({ target: undefined}),\n      //new ol.control.Rotate({\n      // autoHide: true,\n      // label: “N”\n      //}),\n      //new ol.control.MeasureTool({ sphereradius: 6378137 })\n    ]),\n    target: _this.el,\n    layers: _layers,\n    view: _this.view\n  });\n  this.map.on('moveend', function (e) {\n    let _map = e.map;\n    let _extent = _map.getView().calculateExtent(_map.getSize());\n    let _point = ol.extent.getCenter(_extent);\n    // console.log(_point);\n    /* $.each(appData.gis, function (i, n) {\n       n.GisIcon(_point[0], _point[1]);\n       n.GisView(_point[0], _point[1]);\n     });*/\n\n    let _zoom = _this.view.getZoom();\n    // console.log(_zoom);\n\n    let _layers = _map.getLayers().getArray();\n    if (_zoom > 5) {\n      _layers.forEach(function (_layer) {\n        let _source = _layer.getSource();\n        if (_layer.get(\"layer_type\") === \"Cluster\") {\n          _source.setDistance(0);\n        }\n      });\n    } else {\n      _layers.forEach(function (_layer) {\n        let _source = _layer.getSource();\n        if (_layer.get(\"layer_type\") === \"Cluster\") {\n          _source.setDistance(50);\n        }\n      });\n    }\n  });\n\n  $(\"body\").append(`<div id=\"em_ol_info\" class=\"em-tooltip em-tooltip-static\" style=\"z-index: 800\"></div>`);\n  this.Info = document.getElementById('em_ol_info');\n  this.InfoOverlay = new ol.Overlay({\n    element: this.Info,\n    positioning: 'bottom-center',\n    stopEvent: false,\n    offset: [6, -32],\n    autoPan: true,\n    autoPanAnimation: {\n      duration: 100\n    }\n  });\n  this.map.addOverlay(this.InfoOverlay);\n  this.map.on('pointermove', this.InfoPointermoveFn);\n  this.map.on('click', this.InfoClickFn);\n\n\n  // 测量\n  this.measureSource = new ol.source.Vector();\n  this.measureVector = new ol.layer.Vector({\n    source: this.measureSource,\n    style: new ol.style.Style({\n      fill: new ol.style.Fill({\n        color: 'rgba(255, 255, 255, 0.4)'\n      }),\n      stroke: new ol.style.Stroke({\n        color: '#ffcc33',\n        width: 2\n      }),\n      image: new ol.style.Circle({\n        radius: 7,\n        fill: new ol.style.Fill({\n          color: '#ffcc33'\n        })\n      })\n    })\n  });\n  this.map.addLayer(this.measureVector);\n};\nemMap.prototype.viewFn = function (_num, _center) {\n  if (_center === \"none\") {\n    this.view.animate({\n      zoom: _num,\n    });\n  } else {\n    this.view.animate({\n      center: _center,\n      zoom: _num,\n      duration: 100\n    });\n  }\n\n};\n\n\n// display popup on click\nemMap.prototype.InfoClickFn = function (evt) {\n\n  let _this = null;\n  let _mapNmame = store.getters[\"scene/type\"];\n  if (window[_mapNmame]) {\n    _this = window[_mapNmame];\n  } else {\n    return\n  }\n\n\n  let feature = evt.map.forEachFeatureAtPixel(evt.pixel,\n    function (feature) {\n      return feature;\n    });\n  if (feature) {\n    console.log(feature);\n    let _type = null;\n    let _featureData = null;\n    if (feature.get('features') && feature.get('features').length === 1) {\n      let _feature = feature.get('features')[0];\n      _type = _feature.getId().split(\"_\");\n      _featureData = _feature.get(\"featureData\");\n    } else if (feature.get(\"featureData\")) {\n      _type = feature.getId().split(\"_\");\n      _featureData = feature.get(\"featureData\");\n    } else {\n      return\n    }\n\n    vueBus.$emit(\"set_drawer\", {\n      fn: \"showFN\",\n      type: _type[1],\n      content: _featureData\n    });\n  }\n};\n// change mouse cursor when over marker\nemMap.prototype.InfoPointermoveFn = function (evt) {\n\n  let _this = null;\n  let _mapNmame = store.getters[\"scene/type\"];\n  if (window[_mapNmame]) {\n    _this = window[_mapNmame];\n  } else {\n    return\n  }\n\n  let _Info = _this.Info;\n\n  if (evt.dragging) {\n    $(_Info).hide();\n    return;\n  }\n\n\n  let pixel = evt.map.getEventPixel(evt.originalEvent);\n  let hit = evt.map.hasFeatureAtPixel(pixel);\n  $(\"#\" + _mapNmame).css(\"cursor\", hit ? 'pointer' : '');\n\n\n  let feature = evt.map.forEachFeatureAtPixel(evt.pixel, function (feature) {\n    return feature;\n  });\n  if (feature) {\n    let _coordinate = evt.coordinate;\n\n    if (feature.get('features') && feature.get('features').length === 1) {\n      let _feature = feature.get('features')[0];\n      let _type = _feature.getId().split(\"_\");\n      _this.infoFn({\n        type: _type[1],\n        content: _feature.get(\"featureData\"),\n        lng: _coordinate[0],\n        lat: _coordinate[1]\n      });\n    } else if (feature.get(\"featureData\")) {\n      let _type = feature.getId().split(\"_\");\n      _this.infoFn({\n        type: _type[1],\n        content: feature.get(\"featureData\"),\n        lng: _coordinate[0],\n        lat: _coordinate[1]\n      });\n    } else {\n      return;\n    }\n  } else {\n    // $(_Info).hide();\n  }\n\n};\nemMap.prototype.infoFn = function (OBJ) {\n  console.log(OBJ);\n  /*OBJ={\n      type: \"info\",\n      content: data,\n      lng: data.googleLang,\n      lat: data.googleLat\n  }*/\n\n  let _content = contentFN(OBJ);\n\n  $(this.Info).html(_content);\n  $(this.Info).show();\n  this.InfoOverlay.setPosition([OBJ.lng, OBJ.lat]);\n};\n\n\n//坐标查询\nemMap.prototype.coordinateLisen = function (evt) {\n\n  let _coordinateContent = null;\n  let _coordinateOverlay = null;\n  let _mapNmame = store.getters[\"scene/type\"];\n  console.log(window[_mapNmame]);\n  if (window[_mapNmame]) {\n    _coordinateContent = window[_mapNmame].coordinate_content;\n    _coordinateOverlay = window[_mapNmame].coordinate_overlay;\n  } else {\n    return\n  }\n  let coordinate = evt.coordinate;\n  let hdms = ol.coordinate.toStringHDMS(ol.proj.toLonLat(coordinate));\n\n  _coordinateContent.innerHTML = '经：<code>' + formatDegree(coordinate[0]) + '</code>,<br>纬：<code>' + formatDegree(coordinate[1]) + '</code>';\n  console.log(coordinate);\n  _coordinateOverlay.setPosition(coordinate);\n};\nemMap.prototype.coordinateOnFn = function () {\n  let _this = this;\n\n  $(\"body\").append(`\n        <div id=\"coordinate\" class=\"ol-popup\">\n            <a href=\"#\" id=\"coordinate_closer\" class=\"ol-popup-closer\"></a>\n            <div id=\"coordinate_content\"></div>\n        </div>\n    `);\n\n  this.coordinate_container = document.getElementById('coordinate');\n  this.coordinate_content = document.getElementById('coordinate_content');\n  this.coordinate_closer = document.getElementById('coordinate_closer');\n\n  this.coordinate_overlay = new ol.Overlay({\n    element: this.coordinate_container,\n    autoPan: true,\n    autoPanAnimation: {\n      duration: 100\n    }\n  });\n\n  this.coordinate_closer.onclick = function () {\n    _this.coordinate_overlay.setPosition(undefined);\n    _this.coordinate_closer.blur();\n    return false;\n  };\n  this.map.addOverlay(this.coordinate_overlay);\n  this.map.on('singleclick', this.coordinateLisen);\n\n};\nemMap.prototype.coordinateOffFn = function () {\n  $(\"#coordinate\").remove();\n  this.map.removeOverlay(this.coordinate_overlay);\n  // ol.Observable.unByKey(_lisen);\n  this.map.un('singleclick', this.coordinateLisen);\n};\n\n\n//测量\nemMap.prototype.pointerMoveHandler = function (evt) {\n  let _helpTooltipElement = null;\n  let _helpTooltip = null;\n  let _continuePolygonMsg = null;\n  let _continueLineMsg = null;\n\n\n  let _map = null;\n  let _mapNmame = store.getters[\"scene/type\"];\n  if (window[_mapNmame]) {\n    _map = window[_mapNmame];\n  } else {\n    return\n  }\n\n\n  if (_map) {\n    _helpTooltipElement = _map.helpTooltipElement;\n    _helpTooltip = _map.helpTooltip;\n    _continuePolygonMsg = _map.continuePolygonMsg;\n    _continueLineMsg = _map.continueLineMsg;\n\n  } else {\n    return\n  }\n\n  if (evt.dragging) {\n    return;\n  }\n  var helpMsg = '点击测量';\n\n  if (this.sketch) {\n    var geom = (this.sketch.getGeometry());\n    if (geom instanceof ol.geom.Polygon) {\n      helpMsg = _continuePolygonMsg;\n    } else if (geom instanceof ol.geom.LineString) {\n      helpMsg = _continueLineMsg;\n    }\n  }\n\n  _helpTooltipElement.innerHTML = helpMsg;\n  _helpTooltip.setPosition(evt.coordinate);\n\n  _helpTooltipElement.classList.remove('hidden');\n};\nemMap.prototype.formatLength = function (line) {\n  let length = ol.sphere.getLength(line, {\n    projection: 'EPSG:4326'\n  });\n  let output;\n  if (length > 100) {\n    output = (Math.round(length / 1000 * 100) / 100) +\n      ' ' + 'km';\n  } else {\n    output = (Math.round(length * 100) / 100) +\n      ' ' + 'm';\n  }\n  return output;\n};\nemMap.prototype.formatArea = function (polygon) {\n  let area = ol.sphere.getArea(polygon, {\n    projection: 'EPSG:4326'\n  });\n  let output;\n  if (area > 10000) {\n    output = (Math.round(area / 1000000 * 100) / 100) +\n      ' ' + 'km<sup>2</sup>';\n  } else {\n    output = (Math.round(area * 100) / 100) +\n      ' ' + 'm<sup>2</sup>';\n  }\n  return output;\n};\nemMap.prototype.addInteraction = function (_type) {\n  let _this = this;\n\n  let type = (_type == 'area' ? 'Polygon' : 'LineString');\n  _this.measure_draw = new ol.interaction.Draw({\n    source: _this.measureSource,\n    type: type,\n    style: new ol.style.Style({\n      fill: new ol.style.Fill({\n        color: 'rgba(255, 255, 255, 0.4)'\n      }),\n      stroke: new ol.style.Stroke({\n        color: 'rgba(0, 0, 0, 0.5)',\n        lineDash: [10, 10],\n        width: 2\n      }),\n      image: new ol.style.Circle({\n        radius: 6,\n        stroke: new ol.style.Stroke({\n          color: 'rgba(0, 0, 0, 0.7)'\n        }),\n        fill: new ol.style.Fill({\n          color: 'rgba(255, 255, 255, 0.8)'\n        })\n      })\n    })\n  });\n  this.map.addInteraction(_this.measure_draw);\n\n  this.createMeasureTooltip();\n  this.createHelpTooltip();\n\n  let listener;\n  _this.measure_draw.on('drawstart', function (evt) {\n    // set sketch\n    _this.sketch = evt.feature;\n\n    var tooltipCoord = evt.coordinate;\n\n    listener = _this.sketch.getGeometry().on('change', function (evt) {\n      var geom = evt.target;\n      var output;\n      if (geom instanceof ol.geom.Polygon) {\n        output = _this.formatArea(geom);\n        tooltipCoord = geom.getInteriorPoint().getCoordinates();\n      } else if (geom instanceof ol.geom.LineString) {\n        output = _this.formatLength(geom);\n        tooltipCoord = geom.getLastCoordinate();\n      }\n      _this.measureTooltipElement.innerHTML = output;\n      _this.measureTooltip.setPosition(tooltipCoord);\n    });\n  }, this);\n\n  _this.measure_draw.on('drawend', function () {\n    _this.measureTooltipElement.className = 'emMeasure-tooltip emMeasure-tooltip-static';\n    _this.measureTooltip.setOffset([0, -7]);\n    // unset sketch\n    _this.sketch = null;\n    // unset tooltip so that a new one can be created\n    _this.measureTooltipElement = null;\n    _this.createMeasureTooltip();\n    ol.Observable.unByKey(listener);\n  }, this);\n};\nemMap.prototype.createHelpTooltip = function () {\n  let _this = this;\n  if (this.helpTooltipElement) {\n    this.helpTooltipElement.parentNode.removeChild(this.helpTooltipElement);\n  }\n  this.helpTooltipElement = document.createElement('div');\n  this.helpTooltipElement.className = 'emMeasure-tooltip hidden';\n  this.helpTooltip = new ol.Overlay({\n    element: _this.helpTooltipElement,\n    offset: [15, 0],\n    positioning: 'center-left'\n  });\n  this.helpTooltip_Overlays.push(this.helpTooltip);\n  this.map.addOverlay(this.helpTooltip);\n};\nemMap.prototype.createMeasureTooltip = function () {\n  let _this = this;\n  if (this.measureTooltipElement) {\n    this.measureTooltipElement.parentNode.removeChild(this.measureTooltipElement);\n  }\n  this.measureTooltipElement = document.createElement('div');\n  this.measureTooltipElement.className = 'emMeasure-tooltip emMeasure-tooltip-measure';\n  this.measureTooltip = new ol.Overlay({\n    element: _this.measureTooltipElement,\n    offset: [0, -15],\n    positioning: 'bottom-center'\n  });\n  this.measureTooltip_Overlays.push(this.measureTooltip);\n  this.map.addOverlay(this.measureTooltip);\n};\nemMap.prototype.measureOn = function (_type) {\n  this.map.on('pointermove', this.pointerMoveHandler);\n  this.map.removeInteraction(this.measure_draw);\n  this.addInteraction(_type);\n};\nemMap.prototype.measureOff = function () {\n  let _this = this;\n  this.helpTooltip_Overlays.forEach(function (_obj) {\n    _this.map.removeOverlay(_obj);\n  });\n  this.helpTooltip_Overlays = [];\n  this.map.un('pointermove', this.pointerMoveHandler);\n  this.map.removeInteraction(this.measure_draw);\n};\nemMap.prototype.measureClear = function () {\n  let _this = this;\n  this.measureTooltip_Overlays.forEach(function (_obj) {\n    _this.map.removeOverlay(_obj);\n  });\n  this.measureTooltip_Overlays = [];\n  this.measureSource.clear();\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/ol/fn.js","//data\nimport {db} from \"./data/db\"\nimport {baseMapFN} from \"./baseMap\"\nimport {emMap, clustersFn, clustersLayerFn, layerFN} from \"./fn\"\n\nfunction openScene(_name) {\n\n  if (!(window[_name])) {\n    window[_name] = new emMap(_name);\n  }\n  return {\n    mapName: _name\n  }\n\n}\n\nexport default {\n  db,\n  openScene,\n  baseMapFN,\n  layerFN,\n  clustersFn,\n  clustersLayerFn\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/ol/index.js","export function baseMapFN() {\n  var forEachPoint = function (func) {\n    return function (input, opt_output, opt_dimension) {\n      var len = input.length;\n      var dimension = opt_dimension ? opt_dimension : 2;\n      var output;\n      if (opt_output) {\n        output = opt_output;\n      } else {\n        if (dimension !== 2) {\n          output = input.slice();\n        } else {\n          output = new Array(len);\n        }\n      }\n      for (var offset = 0; offset < len; offset += dimension) {\n        func(input, output, offset)\n      }\n      return output;\n    };\n  };\n\n  var sphericalMercator = {}\n\n  var RADIUS = 6378137;\n  var MAX_LATITUDE = 85.0511287798;\n  var RAD_PER_DEG = Math.PI / 180;\n\n  sphericalMercator.forward = forEachPoint(function (input, output, offset) {\n    var lat = Math.max(Math.min(MAX_LATITUDE, input[offset + 1]), -MAX_LATITUDE);\n    var sin = Math.sin(lat * RAD_PER_DEG);\n\n    output[offset] = RADIUS * input[offset] * RAD_PER_DEG;\n    output[offset + 1] = RADIUS * Math.log((1 + sin) / (1 - sin)) / 2;\n  });\n\n  sphericalMercator.inverse = forEachPoint(function (input, output, offset) {\n    output[offset] = input[offset] / RADIUS / RAD_PER_DEG;\n    output[offset + 1] = (2 * Math.atan(Math.exp(input[offset + 1] / RADIUS)) - (Math.PI / 2)) / RAD_PER_DEG;\n  });\n\n\n  var baiduMercator = {}\n\n  var MCBAND = [12890594.86, 8362377.87,\n    5591021, 3481989.83, 1678043.12, 0];\n\n  var LLBAND = [75, 60, 45, 30, 15, 0];\n\n  var MC2LL = [\n    [1.410526172116255e-8, 0.00000898305509648872, -1.9939833816331,\n      200.9824383106796, -187.2403703815547, 91.6087516669843,\n      -23.38765649603339, 2.57121317296198, -0.03801003308653,\n      17337981.2],\n    [-7.435856389565537e-9, 0.000008983055097726239,\n      -0.78625201886289, 96.32687599759846, -1.85204757529826,\n      -59.36935905485877, 47.40033549296737, -16.50741931063887,\n      2.28786674699375, 10260144.86],\n    [-3.030883460898826e-8, 0.00000898305509983578, 0.30071316287616,\n      59.74293618442277, 7.357984074871, -25.38371002664745,\n      13.45380521110908, -3.29883767235584, 0.32710905363475,\n      6856817.37],\n    [-1.981981304930552e-8, 0.000008983055099779535, 0.03278182852591,\n      40.31678527705744, 0.65659298677277, -4.44255534477492,\n      0.85341911805263, 0.12923347998204, -0.04625736007561,\n      4482777.06],\n    [3.09191371068437e-9, 0.000008983055096812155, 0.00006995724062,\n      23.10934304144901, -0.00023663490511, -0.6321817810242,\n      -0.00663494467273, 0.03430082397953, -0.00466043876332,\n      2555164.4],\n    [2.890871144776878e-9, 0.000008983055095805407, -3.068298e-8,\n      7.47137025468032, -0.00000353937994, -0.02145144861037,\n      -0.00001234426596, 0.00010322952773, -0.00000323890364,\n      826088.5]];\n\n  var LL2MC = [\n    [-0.0015702102444, 111320.7020616939, 1704480524535203,\n      -10338987376042340, 26112667856603880,\n      -35149669176653700, 26595700718403920,\n      -10725012454188240, 1800819912950474, 82.5],\n    [0.0008277824516172526, 111320.7020463578, 647795574.6671607,\n      -4082003173.641316, 10774905663.51142, -15171875531.51559,\n      12053065338.62167, -5124939663.577472, 913311935.9512032,\n      67.5],\n    [0.00337398766765, 111320.7020202162, 4481351.045890365,\n      -23393751.19931662, 79682215.47186455, -115964993.2797253,\n      97236711.15602145, -43661946.33752821, 8477230.501135234,\n      52.5],\n    [0.00220636496208, 111320.7020209128, 51751.86112841131,\n      3796837.749470245, 992013.7397791013, -1221952.21711287,\n      1340652.697009075, -620943.6990984312, 144416.9293806241,\n      37.5],\n    [-0.0003441963504368392, 111320.7020576856, 278.2353980772752,\n      2485758.690035394, 6070.750963243378, 54821.18345352118,\n      9540.606633304236, -2710.55326746645, 1405.483844121726,\n      22.5],\n    [-0.0003218135878613132, 111320.7020701615, 0.00369383431289,\n      823725.6402795718, 0.46104986909093, 2351.343141331292,\n      1.58060784298199, 8.77738589078284, 0.37238884252424, 7.45]];\n\n\n  function getRange(v, min, max) {\n    v = Math.max(v, min);\n    v = Math.min(v, max);\n\n    return v;\n  }\n\n  function getLoop(v, min, max) {\n    var d = max - min;\n    while (v > max) {\n      v -= d;\n    }\n    while (v < min) {\n      v += d;\n    }\n\n    return v;\n  }\n\n  function convertor(input, output, offset, table) {\n    var px = input[offset];\n    var py = input[offset + 1];\n    var x = table[0] + table[1] * Math.abs(px);\n    var d = Math.abs(py) / table[9];\n    var y = table[2]\n      + table[3]\n      * d\n      + table[4]\n      * d\n      * d\n      + table[5]\n      * d\n      * d\n      * d\n      + table[6]\n      * d\n      * d\n      * d\n      * d\n      + table[7]\n      * d\n      * d\n      * d\n      * d\n      * d\n      + table[8]\n      * d\n      * d\n      * d\n      * d\n      * d\n      * d;\n\n    output[offset] = x * (px < 0 ? -1 : 1);\n    output[offset + 1] = y * (py < 0 ? -1 : 1);\n  }\n\n  baiduMercator.forward = forEachPoint(function (input, output, offset) {\n    var lng = getLoop(input[offset], -180, 180);\n    var lat = getRange(input[offset + 1], -74, 74);\n\n    var table = null;\n    var j;\n    for (j = 0; j < LLBAND.length; ++j) {\n      if (lat >= LLBAND[j]) {\n        table = LL2MC[j];\n        break;\n      }\n    }\n    if (table === null) {\n      for (j = LLBAND.length - 1; j >= 0; --j) {\n        if (lat <= -LLBAND[j]) {\n          table = LL2MC[j];\n          break;\n        }\n      }\n    }\n    output[offset] = lng;\n    output[offset + 1] = lat;\n    convertor(output, output, offset, table);\n  });\n\n  baiduMercator.inverse = forEachPoint(function (input, output, offset) {\n    var y_abs = Math.abs(input[offset + 1]);\n\n    var table = null;\n    for (var j = 0; j < MCBAND.length; j++) {\n      if (y_abs >= MCBAND[j]) {\n        table = MC2LL[j];\n        break;\n      }\n    }\n\n    convertor(input, output, offset, table);\n  });\n\n  var gcj02 = {}\n\n  var PI = Math.PI;\n  var AXIS = 6378245.0;\n  var OFFSET = 0.00669342162296594323;  // (a^2 - b^2) / a^2\n\n  function delta(wgLon, wgLat) {\n    var dLat = transformLat(wgLon - 105.0, wgLat - 35.0);\n    var dLon = transformLon(wgLon - 105.0, wgLat - 35.0);\n    var radLat = wgLat / 180.0 * PI;\n    var magic = Math.sin(radLat);\n    magic = 1 - OFFSET * magic * magic;\n    var sqrtMagic = Math.sqrt(magic);\n    dLat = (dLat * 180.0) / ((AXIS * (1 - OFFSET)) / (magic * sqrtMagic) * PI);\n    dLon = (dLon * 180.0) / (AXIS / sqrtMagic * Math.cos(radLat) * PI);\n    return [dLon, dLat];\n  }\n\n  function outOfChina(lon, lat) {\n    if (lon < 72.004 || lon > 137.8347) {\n      return true;\n    }\n    if (lat < 0.8293 || lat > 55.8271) {\n      return true;\n    }\n    return false;\n  }\n\n  function transformLat(x, y) {\n    var ret = -100.0 + 2.0 * x + 3.0 * y + 0.2 * y * y + 0.1 * x * y + 0.2 * Math.sqrt(Math.abs(x));\n    ret += (20.0 * Math.sin(6.0 * x * PI) + 20.0 * Math.sin(2.0 * x * PI)) * 2.0 / 3.0;\n    ret += (20.0 * Math.sin(y * PI) + 40.0 * Math.sin(y / 3.0 * PI)) * 2.0 / 3.0;\n    ret += (160.0 * Math.sin(y / 12.0 * PI) + 320 * Math.sin(y * PI / 30.0)) * 2.0 / 3.0;\n    return ret;\n  }\n\n  function transformLon(x, y) {\n    var ret = 300.0 + x + 2.0 * y + 0.1 * x * x + 0.1 * x * y + 0.1 * Math.sqrt(Math.abs(x));\n    ret += (20.0 * Math.sin(6.0 * x * PI) + 20.0 * Math.sin(2.0 * x * PI)) * 2.0 / 3.0;\n    ret += (20.0 * Math.sin(x * PI) + 40.0 * Math.sin(x / 3.0 * PI)) * 2.0 / 3.0;\n    ret += (150.0 * Math.sin(x / 12.0 * PI) + 300.0 * Math.sin(x / 30.0 * PI)) * 2.0 / 3.0;\n    return ret;\n  }\n\n  gcj02.toWGS84 = forEachPoint(function (input, output, offset) {\n    var lng = input[offset];\n    var lat = input[offset + 1];\n    if (!outOfChina(lng, lat)) {\n      var deltaD = delta(lng, lat);\n      lng = lng - deltaD[0];\n      lat = lat - deltaD[1];\n    }\n    output[offset] = lng;\n    output[offset + 1] = lat;\n  });\n\n  gcj02.fromWGS84 = forEachPoint(function (input, output, offset) {\n    var lng = input[offset];\n    var lat = input[offset + 1];\n    if (!outOfChina(lng, lat)) {\n      var deltaD = delta(lng, lat);\n      lng = lng + deltaD[0];\n      lat = lat + deltaD[1];\n    }\n    output[offset] = lng;\n    output[offset + 1] = lat;\n  });\n\n  var bd09 = {}\n\n  var PI = Math.PI;\n  var X_PI = PI * 3000 / 180;\n\n  function toGCJ02(input, output, offset) {\n    var x = input[offset] - 0.0065;\n    var y = input[offset + 1] - 0.006;\n    var z = Math.sqrt(x * x + y * y) - 0.00002 * Math.sin(y * X_PI);\n    var theta = Math.atan2(y, x) - 0.000003 * Math.cos(x * X_PI);\n    output[offset] = z * Math.cos(theta);\n    output[offset + 1] = z * Math.sin(theta);\n    return output;\n  }\n\n  function fromGCJ02(input, output, offset) {\n    var x = input[offset];\n    var y = input[offset + 1];\n    var z = Math.sqrt(x * x + y * y) + 0.00002 * Math.sin(y * X_PI);\n    var theta = Math.atan2(y, x) + 0.000003 * Math.cos(x * X_PI);\n    output[offset] = z * Math.cos(theta) + 0.0065;\n    output[offset + 1] = z * Math.sin(theta) + 0.006;\n    return output;\n  }\n\n  bd09.toWGS84 = function (input, opt_output, opt_dimension) {\n    var output = forEachPoint(toGCJ02)(input, opt_output, opt_dimension);\n    return gcj02.toWGS84(output, output, opt_dimension);\n  };\n\n  bd09.fromWGS84 = function (input, opt_output, opt_dimension) {\n    var output = gcj02.fromWGS84(input, opt_output, opt_dimension);\n    return forEachPoint(fromGCJ02)(output, output, opt_dimension);\n  };\n\n\n  var projzh = {}\n\n  projzh.smerc2bmerc = function (input, opt_output, opt_dimension) {\n    var output = sphericalMercator.inverse(input, opt_output, opt_dimension);\n    output = bd09.fromWGS84(output, output, opt_dimension);\n    return baiduMercator.forward(output, output, opt_dimension);\n  };\n\n  projzh.bmerc2smerc = function (input, opt_output, opt_dimension) {\n    var output = baiduMercator.inverse(input, opt_output, opt_dimension);\n    output = bd09.toWGS84(output, output, opt_dimension);\n    return sphericalMercator.forward(output, output, opt_dimension);\n  };\n\n  projzh.bmerc2ll = function (input, opt_output, opt_dimension) {\n    var output = baiduMercator.inverse(input, opt_output, opt_dimension);\n    return bd09.toWGS84(output, output, opt_dimension);\n  };\n\n  projzh.ll2bmerc = function (input, opt_output, opt_dimension) {\n    var output = bd09.fromWGS84(input, opt_output, opt_dimension);\n    return baiduMercator.forward(output, output, opt_dimension);\n  };\n\n  projzh.ll2smerc = sphericalMercator.forward;\n  projzh.smerc2ll = sphericalMercator.inverse;\n\n\n  var extent = [72.004, 0.8293, 137.8347, 55.8271];\n\n  var baiduMercatorProj = new ol.proj.Projection({\n    code: 'baidu',\n    extent: ol.extent.applyTransform(extent, projzh.ll2bmerc),\n    units: 'm'\n  });\n\n  ol.proj.addProjection(baiduMercatorProj);\n  ol.proj.addCoordinateTransforms('EPSG:4326', baiduMercatorProj, projzh.ll2bmerc, projzh.bmerc2ll);\n  ol.proj.addCoordinateTransforms('EPSG:3857', baiduMercatorProj, projzh.smerc2bmerc, projzh.bmerc2smerc);\n\n  var bmercResolutions = new Array(19);\n  for (var i = 0; i < 19; ++i) {\n    bmercResolutions[i] = Math.pow(2, 18 - i);\n  }\n\n  var baidu_vec = new ol.layer.Tile({\n    name: \"baseMap_layer\",\n    source: new ol.source.XYZ({\n      projection: 'baidu',\n      maxZoom: 18,\n      tileUrlFunction: function (tileCoord) {\n        var x = tileCoord[1];\n        var y = tileCoord[2];\n        var z = tileCoord[0];\n        return \"http://online4.map.bdimg.com/tile/?qt=vtile&x=\" + x + \"&y=\" + y + \"&z=\" + z + \"&styles=pl&scaler=1&udt=20190521\";\n      },\n      tileGrid: new ol.tilegrid.TileGrid({\n        resolutions: bmercResolutions,\n        origin: [0, 0],\n        extent: ol.extent.applyTransform(extent, projzh.ll2bmerc),\n        tileSize: [256, 256]\n      })\n    })\n  });\n\n  var baidu_img = new ol.layer.Tile({\n    name: \"baseMap_layer\",\n    opacity: 1.0,\n    source: new ol.source.XYZ({\n      projection: 'baidu',\n      maxZoom: 18,\n      tileUrlFunction: function (tileCoord) {\n        var x = tileCoord[1];\n        var y = tileCoord[2];\n        var z = tileCoord[0];\n\n        // return \"http://online4.map.bdimg.com/tile/?qt=vtile&x=\"+x+\"&y=\"+y+\"&z=\"+z+\"&styles=pl&scaler=1&udt=20190521\";\n        return \"http://shangetu2.map.bdimg.com/it/u=x=\" + x + \";y=\" + y + \";z=\" + z + \";v=009;type=sate&fm=46&udt=20190521\";\n      },\n      tileGrid: new ol.tilegrid.TileGrid({\n        resolutions: bmercResolutions,\n        origin: [0, 0],\n        extent: ol.extent.applyTransform(extent, projzh.ll2bmerc),\n        tileSize: [256, 256]\n      })\n    })\n  });\n\n  var baidu_cva = new ol.layer.Tile({\n    name: \"baseMap_layer\",\n    source: new ol.source.XYZ({\n      projection: 'baidu',\n      maxZoom: 18,\n      tileUrlFunction: function (tileCoord) {\n        var x = tileCoord[1];\n        var y = tileCoord[2];\n        var z = tileCoord[0];\n\n        return \"http://online4.map.bdimg.com/tile/?qt=vtile&x=\" + x + \"&y=\" + y + \"&z=\" + z + \"&styles=sl&scaler=1&udt=20190521\";\n      },\n      tileGrid: new ol.tilegrid.TileGrid({\n        resolutions: bmercResolutions,\n        origin: [0, 0],\n        extent: ol.extent.applyTransform(extent, projzh.ll2bmerc),\n        tileSize: [256, 256]\n      })\n    })\n  });\n\n\n//创建天地图图层(WMTS方式)\n  function crtLayerWMTS(type, proj, opacity, tk) {\n    var projection = ol.proj.get(proj);\n    var projectionExtent = projection.getExtent();\n    var size = ol.extent.getWidth(projectionExtent) / 256;\n    var resolutions = new Array(19);\n    var matrixIds = new Array(19);\n    for (var z = 1; z < 19; ++z) {\n      // generate resolutions and matrixIds arrays for this WMTS\n      resolutions[z] = size / Math.pow(2, z);\n      matrixIds[z] = z;\n    }\n\n    var layer = new ol.layer.Tile({\n      name: \"baseMap_layer\",\n      opacity: opacity,\n      source: new ol.source.WMTS({\n        attributions: '<a href=\"http://www.tianditu.com/service/info.html?sid=5292&type=info\">天地图</a>',\n        url: 'http://t0.tianditu.gov.cn/' + type + '/wmts?tk=' + tk,\n        layer: type.substr(0, 3),\n        matrixSet: type.substring(4),\n        format: 'tiles',\n        projection: projection,\n        tileGrid: new ol.tilegrid.WMTS({\n          origin: ol.extent.getTopLeft(projectionExtent),\n          resolutions: resolutions,\n          matrixIds: matrixIds\n        }),\n        style: 'default',\n        wrapX: true\n      })\n    });\n    layer.id = type;\n    return layer;\n  }\n\n// 天地图(vec_c:矢量底图经纬度投影,img_c:影像底图经纬度投影)\n  var tLayer_vec = crtLayerWMTS(\"vec_c\", \"EPSG:4326\", 1.0, \"dcfb31be4b1daef33e484e48348cb28b\");\n// 天地图(vec_c:矢量底图经纬度投影,img_c:影像底图经纬度投影)\n  var tLayer_img = crtLayerWMTS(\"img_c\", \"EPSG:4326\", 1.0, \"dcfb31be4b1daef33e484e48348cb28b\");\n\n\n// 本地地图\n  var osmLayer_vec = new ol.layer.Tile({\n    name: \"baseMap_layer\",\n    opacity: 1.0,\n    source: new ol.source.XYZ({\n      url: 'http://192.168.20.125:800/sceneData/zhlh_vec/{z}/{x}/{y}.png',\n      wrapX: false\n    }),\n    projection: 'EPSG:4326'\n  });\n  var osmLayer_img = new ol.layer.Tile({\n    name: \"baseMap_layer\",\n    opacity: 1.0,\n    source: new ol.source.XYZ({\n      url: 'http://192.168.20.125:800/sceneData/zhlh_img/{z}/{x}/{y}.png',\n      wrapX: false\n    }),\n    projection: 'EPSG:4326'\n  });\n\n  var timeLayer_vec = new ol.layer.Tile({\n    name: \"baseMap_layer\",\n    opacity: 1.0,\n    source: new ol.source.XYZ({\n      url: 'http://192.168.20.125:800/sceneData/zhlh_img/{z}/{x}/{y}.png',\n      wrapX: false\n    }),\n    projection: 'EPSG:4326'\n  });\n\n  return {\n    baidu_vec,//百度矢量底图\n    baidu_img,//百度影像底图\n    baidu_cva,//百度标注底图\n    osmLayer_vec,//离线矢量底图\n    osmLayer_img,//离线影像底图\n    tLayer_vec,//天地图矢量底图\n    tLayer_img//天地图影像地图\n  };\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/ol/baseMap.js","<template>\n  <div class=\"map\">\n    <div :id=\"id\"></div>\n  </div>\n</template>\n\n<script>\n  import {loadJs, loadCss} from \"@/utils/tools\";\n  import mp from \"@/utils/ol/index\";\n  import {queryVicinityPrint, findOne, queryAllcount} from \"@/api/tree\";\n  import {marker} from \"@/api/marker\";\n  import {geom} from \"@/api/geom\";\n\n  export default {\n    data() {\n      return {\n        id: \"map\"\n      };\n    },\n    props: {},\n    methods: {\n      init() {\n\n        let _this = this;\n        // 初始化场景\n        let _element = document.getElementById('ol_js');\n        if (_element) {\n          _this.mapInit();\n          _this.layerInit();\n        } else {\n          //动态加载依赖库\n          let _url = process.env.STATIC_URL;\n          // console.log('css', _url);\n          loadCss(\"ol_css\", _url + \"/sceneStatic/ol/ol.css\", function () {\n            // console.log('css');\n          });\n          loadJs(\"ol_js\", _url + \"/sceneStatic/ol/ol.js\", function () {\n            _this.mapInit();\n            _this.layerInit();\n          });\n        }\n      },\n      layerInit() {\n        let _this=this;\n        let _Tabs = this.$store.getters[\"scene/layerData\"];\n        console.log(\"_Tabs\");\n        console.log(_Tabs);\n        _Tabs.forEach(function (_tab) {\n          _tab.data.addTab=\"false\";\n          _this[_tab.data.fn](_tab.data);\n        });\n      },\n      mapInit() {\n        window[this.id].init([114.031047, 22.663679], [\n          mp.baseMapFN().baidu_vec\n        ]);\n      },\n      spaceTimeBaseMap(obj) {\n\n        let _url = \"\";\n\n        if (obj.url) {\n          _url = obj.url;\n        }\n\n        let _resolutions = obj.resolutions;\n        var _origin = obj.origin;\n\n        this.toScene({\n          zIndex: 4\n        });\n\n        let _layer = new ol.layer.Tile({//正视投影\n          name: \"baseMap_layer\",\n          source: new ol.source.ESRICache({\n            origin: _origin,\n            resolutions: _resolutions,\n            projection: 'EPSG:4326',\n            url: _url\n          })\n        });\n        return _layer;\n      },\n      spaceTimeData(obj) {\n\n        let _url = obj.data_url;\n        let _type = obj.layer_name;\n        let _iconUrl = obj.data_maker_iconUrl;\n        let _titleKey = obj.maker_titleKey;\n        let _clustersColor = obj.clusters_color;\n\n        // window[this.id].viewFn(0, [114.05566529913777, 22.604387298808085]);\n        let _layer = mp.clustersLayerFn(_url,\n          {\n            type: _type,\n            titleKey: _titleKey,\n            iconUrl: _iconUrl\n          }, _clustersColor, 48);\n\n        this.addLayer({\n          layer: _layer.layer\n        });\n      },\n      baseMapFn(obj) {\n        let _layer = null;\n        console.log(obj);\n        this.removeLayer({\n          layer_name: \"baseMap\"//删除当前低图\n        });\n\n        switch (obj.layerName) {\n          case \"1\"://天地图矢量图\n            _layer = mp.baseMapFN().tLayer_vec;\n            break;\n          case \"2\"://天地图影像图\n            _layer = mp.baseMapFN().tLayer_img;\n            break;\n          case \"3\"://百度矢量图\n            _layer = mp.baseMapFN().baidu_vec;\n            break;\n          case \"4\"://百度影像图\n            _layer = mp.baseMapFN().baidu_img;\n            break;\n          case \"5\"://时空云矢量图\n            let layer = mp.baseMapFN().tLayer_vec;\n            this.addLayer({\n              layer: layer,\n              zIndex: -1\n            });\n            _layer = this.spaceTimeBaseMap({\n              // url: \"http://onelz.oicp.vip/proxy/layer/C8DDAE2452CE48F4ACBE0D60C455A234/01D4E45CB4A84DE7B5DF3D859529D918/tile/{z}/{y}/{x}\"\n              url: \"http://onelz.oicp.vip/proxy/layer/50F068225D3944DD805E7B986D36C7B6/999C1448C6DD4842A35412B42226F0A3/tile/{z}/{y}/{x}\",\n              origin:[-180,90],\n              resolutions:[\n                0.9410711005830282, 0.7031250000000002,\n                0.3515625000000001, 0.17578125000000006,\n                0.08789062500000003, 0.043945312500000014,\n                0.021972656250000007, 0.010986328125000003,\n                0.005493164062500002, 0.002746582031250001,\n                0.0013732910156250004, 6.866455078125002E-4,\n                3.433227539062501E-4, 1.7166137695312505E-4,\n                8.583068847656253E-5, 4.2915344238281264E-5,\n                2.1457672119140632E-5, 1.0728836059570316E-5,\n                5.364418029785158E-6, 2.682209014892579E-6,\n                1.34110450744629E-6\n              ]\n            });\n            break;\n          case \"6\"://时空云影像图\n            _layer = this.spaceTimeBaseMap({\n              url: \"http://onelz.oicp.vip/proxy/layer/E36DF1E5DD7D4081A1E722ED2C8D7455/999C1448C6DD4842A35412B42226F0A3/tile/{z}/{y}/{x}\",\n              origin:[-400,400],\n              resolutions:[//影像图范围\n                5.9486525145757E-4, 2.97432625728785E-4,\n                1.5228550437313792E-4, 7.614275218656896E-5,\n                3.807137609328448E-5, 1.903568804664224E-5,\n                9.51784402332112E-6, 4.75892201166056E-6,\n                2.37946100583028E-6, 1.18973050291514E-6,\n                5.9486525145757E-7, 2.97432625728785E-7]\n            });\n            break;\n          case \"7\"://本地矢量图\n            _layer = mp.baseMapFN().osmLayer_vec;\n            break;\n          case \"8\"://本地影像图\n            _layer = mp.baseMapFN().osmLayer_img;\n            break;\n        }\n\n        this.addLayer({\n          layer: _layer,\n          zIndex: -1\n        });\n      },\n      xyz(obj) {//坐标\n        console.log(obj);\n        if (obj.trigger) {\n          window[this.id].coordinateOnFn();\n        } else {\n          window[this.id].coordinateOffFn();\n        }\n      },\n      measure_drawPloy(obj) {\n        window[this.id].measureOn(\"area\");\n      },\n      measure_drawLine(obj) {\n        window[this.id].measureOn(\"distance\");\n      },\n      measure_clear(obj) {\n        window[this.id].measureClear();\n        window[this.id].measureOff();\n      },\n      toScene(obj) {\n        let _zIndex = obj.zIndex ? obj.zIndex : 1;\n        let _lng = obj.lng ? obj.lng : 114.031047;\n        let _lat = obj.lat ? obj.lat : 22.663679;\n\n        window[this.id].viewFn(_zIndex, [_lng, _lat]);\n      },\n      addLayer(obj) {\n        let _layer = obj.layer;\n        if (obj.zIndex) {\n          _layer.setZIndex(obj.zIndex);\n        }\n        window[this.id].map.addLayer(_layer);\n      },\n      removeLayer(obj) {\n\n        let _map = window[this.id].map;\n        let _layers = _map.getLayers().getArray();\n\n        _layers.forEach(function (_layer) {\n          console.log(_layer.get(\"name\"));\n          let _name = obj.layer_name + \"_layer\";\n          if (_layer.get(\"name\") === _name) {\n            _map.removeLayer(_layer);\n          }\n        });\n      },\n      scene_data(obj) {//接收图层属性数据\n\n        console.log(obj);\n        switch (obj.data_type) {\n          case \"1\"://采集的树数据\n            if (obj.trigger) {\n              this.queryVicinityPrintFn(obj);\n            } else {\n              this.removeLayer({\n                layer_name: obj.layer_name\n              });\n            }\n            break;\n          case \"2\"://时空云数据\n            if (obj.trigger) {\n              this.spaceTimeData(obj);\n            } else {\n              this.removeLayer({\n                layer_name: obj.layer_name\n              });\n            }\n            break;\n          case \"3\"://几何数据展示\n            if (obj.trigger) {\n              this.geomDataFn(obj);\n            } else {\n              this.removeLayer({\n                layer_name: obj.layer_name\n              });\n              this.bus.$emit(\"scene_data_emTabs\", {\n                fn: \"removeTabFn\",\n                name: obj.layer_name,\n                title: obj.layer_title\n              });\n            }\n            break;\n          case \"4\"://marker显示\n            if (obj.trigger) {\n              this.markerDataFn(obj);\n            } else {\n              this.removeLayer({\n                layer_name: obj.layer_name\n              });\n              this.bus.$emit(\"scene_data_emTabs\", {\n                fn: \"removeTabFn\",\n                name: obj.layer_name,\n                title: obj.layer_title\n              });\n            }\n            break;\n        }\n      },\n      queryVicinityPrintFn(obj) { //树木范围查询显示\n        let _val = {\n          lng: null,\n          lat: null,\n          distance: null,\n          layer_name: \"\",\n          data_maker_iconUrl: \"\",\n          maker_titleKey: \"\",\n          clusters_color: \"\",\n        };\n\n        for (let k in _val) {\n          if (obj[k]) {\n            _val[k] = obj[k];\n          }\n        }\n\n        queryVicinityPrint({\n          params: {\n            longitude: _val.lng ? _val.lng : 114.03188276054428,\n            latitude: _val.lat ? _val.lat : 22.619840297782094,\n            distance: _val.distance ? _val.distance : 1\n          }\n        }).then(response => {\n          let _data = [];\n          if (response.statusCode === 200) {\n            response.data.forEach(function (_obj) {\n              _obj.icon = _val.data_maker_iconUrl;\n            });\n            _data = response.data;\n          }\n          let _layer = mp.clustersFn(_data, {\n            type: _val.layer_name,\n            titleKey: _val.maker_titleKey,\n            iconUrlKey: \"icon\"\n          }, _val.clusters_color, 30);\n          this.addLayer({\n            layer: _layer.layer\n          });\n        });\n      },\n      markerDataFn(obj) {\n        let _val = {\n          addTab: \"true\",\n          api_name: \"\",\n          data_url: \"\",\n          params: {},\n          layer_name: \"\",\n          layer_title: \"\",\n          data_maker_iconUrl: \"\",\n          maker_titleKey: \"\",\n          clusters_color: \"\",\n        };\n        for (let k in _val) {\n          if (obj[k]) {\n            _val[k] = obj[k];\n          }\n        }\n\n        // params\n        for (let k in obj) {\n          let _params = k.split(\"_\");\n          if (_params[0] === \"params\") {\n            _val.params[_params[1]] = obj[k];\n          }\n        }\n\n        if (_val.api_name === \"queryVicinityPrint\") {\n\n          // this.queryVicinityPrintFn(obj)\n\n        } else if (_val.api_name === \"marker\") {\n\n          marker({\n            url: _val.data_url,\n            params: _val.params\n          }).then(response => {\n            let _data = [];\n            if (response.statusCode === 200) {\n              response.data.forEach(function (_obj) {\n                _obj.icon = _val.data_maker_iconUrl;\n              });\n              _data = response.data;\n            }\n            let _layer = mp.clustersFn(_data, {\n              type: _val.layer_name,\n              titleKey: _val.maker_titleKey,\n              iconUrlKey: \"icon\"\n            }, _val.clusters_color, 50);\n            this.addLayer({\n              layer: _layer.layer\n            });\n\n\n            if (_val.addTab === \"true\") {\n              this.bus.$emit(\"scene_data_emTabs\", {\n                fn: \"addTab\",\n                name: _val.layer_name,\n                title: _val.layer_title,\n                data: obj,\n                treeData: _data,\n                treeChildren: \"children\",\n                treeLabel: _val.maker_titleKey\n              });\n            }\n          });\n\n        }\n\n      },\n      geomDataFn(obj) { //矢量数据展示\n        let _val = {\n          addTab: \"true\",\n          data_url: \"\",\n          params: {},\n          layer_name: \"\",\n          layer_title: \"\",\n          api_name: \"\",\n          geomType: \"\",\n          geom_style: \"1\",//几何样式类型\n          geom_titleKey: \"\",\n          strokeWidth: 2,\n          strokeColor: \"[0, 255, 0, 1.0]\",\n          fillColor: \"[0, 0, 255, 1.0]\"\n        };\n\n        for (let k in _val) {\n          if (obj[k]) {\n            _val[k] = obj[k];\n          }\n        }\n\n        // 解析(params_xx)\n        for (let k in obj) {\n          let _params = k.split(\"_\");\n          if (_params[0] === \"params\") {\n            _val.params[_params[1]] = obj[k];\n          }\n        }\n\n        if (_val.api_name === \"geom\") {\n\n          geom({\n            url: _val.data_url,\n            params: _val.params\n          }).then(response => {\n            let _data = [];\n            if (response.statusCode === 200) {\n              response.data.forEach(function (_obj) {\n                if (_obj.coordinates && _val.geomType === \"line\") {\n                  let _coordinates = JSON.parse(_obj.coordinates);\n                  _obj.coordinates = _coordinates.data;\n                }else if(_obj.coordinates && _val.geomType === \"polygon\"){\n                  let _data=[];\n                  let _coordinates = JSON.parse(_obj.coordinates);\n                  _data.push(_coordinates.data);\n                  _obj.coordinates = _data;\n                }\n              });\n              _data = response.data;\n            }\n            let _layer = mp.layerFN(_data, {\n              type: _val.layer_name,\n              geomType: _val.geomType\n            }, {\n              type: _val.geom_style,\n              titleKey: _val.geom_titleKey,//标题\n              strokeWidth: _val.strokeWidth,\n              strokeColor: _val.strokeColor,\n              fillColor: _val.fillColor\n            });\n            this.addLayer({\n              layer: _layer.layer\n            });\n            if (_val.addTab === \"true\") {\n              this.bus.$emit(\"scene_data_emTabs\", {\n                fn: \"addTab\",\n                name: _val.layer_name,\n                title: _val.layer_title,\n                data: obj,\n                treeData: _data,\n                treeChildren: \"children\",\n                treeLabel: _val.geom_titleKey\n              });\n            }\n          });\n        }\n\n      }\n    },\n    created() {\n      this.$store.commit(\"scene/set_type\", this.id);\n      this.$store.commit(\"scene/set_toolbar\", [\n        {\n          id: \"tool_flyToScene\",\n          value: \"场景\",\n          control_type: \"scene\",\n          icon: \"el-icon-scene\",\n          control_id: \"\",\n          fn: \"toScene\",\n          trigger: \"none\"\n        },\n        {\n          id: \"tool_coordinates\",\n          value: \"坐标\",\n          control_type: \"scene\",\n          icon: \"el-icon-coordinates\",\n          control_id: \"\",\n          fn: \"xyz\",\n          trigger: true\n        },\n        {\n          id: \"tool_data\",\n          value: \"数据\",\n          control_type: \"tool\",\n          icon: \"el-icon-data\",\n          control_id: \"scene_data\",\n          fn: \"handleData\",\n          trigger: true\n        },\n        {\n          id: \"tool_distance\",\n          value: \"距离\",\n          control_type: \"scene\",\n          icon: \"el-icon-distance\",\n          control_id: \"\",\n          fn: \"measure_drawLine\",\n          trigger: \"none\"\n        },\n        {\n          id: \"tool_area\",\n          value: \"面积\",\n          control_type: \"scene\",\n          icon: \"el-icon-area\",\n          control_id: \"\",\n          fn: \"measure_drawPloy\",\n          trigger: \"none\"\n        },\n        {\n          id: \"tool_label\",\n          value: \"清除\",\n          control_type: \"scene\",\n          icon: \"el-icon-remove2\",\n          control_id: \"\",\n          fn: \"measure_clear\",\n          trigger: \"none\"\n        }\n      ]);//设置场景工具面板\n      //初始化二维场景\n      mp.openScene(this.id);\n\n    },\n    mounted() {\n      this.init();\n      this.bus.$on(this.id, obj => {\n        this[obj.fn](obj);\n      });\n    },\n    beforeDestroy() {\n      this.bus.$off(this.id);\n    }\n  };\n</script>\n<style lang=\"scss\" scoped>\n  @import \"map\";\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/map/map.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"map\"},[_c('div',{attrs:{\"id\":_vm.id}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5c4d7a5e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/map/map.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5c4d7a5e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./map.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./map.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./map.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5c4d7a5e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./map.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5c4d7a5e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/map/map.vue\n// module id = null\n// module chunks = ","import request from '@/utils/request'\n\n\nexport function geom(obj) {\n  return request({\n    url:obj.url,\n    method: 'get',\n    params:obj.params\n  })\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/geom.js","import request from '@/utils/request'\n\n\nexport function marker(obj) {\n  return request({\n    url:obj.url,\n    method: 'get',\n    params:obj.params\n  })\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/marker.js","import request from '@/utils/request'\r\n\r\n\r\nexport function queryVicinityPrint(obj) {\r\n  return request({\r\n    url:\"/gardens/tree/queryVicinityPrint\",\r\n    method: 'get',\r\n    params:obj.params\r\n  })\r\n}\r\n\r\nexport function findOne(obj) {\r\n  return request({\r\n    url:\"/gardens/tree/findOne\",\r\n    method: 'get',\r\n    params:obj.params\r\n  })\r\n}\r\n\r\nexport function queryAllcount(obj) {\r\n  return request({\r\n    url:\"/gardens/tree/queryAllcount\",\r\n    method: 'get',\r\n    params:obj.params\r\n  })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/tree.js"],"sourceRoot":""}