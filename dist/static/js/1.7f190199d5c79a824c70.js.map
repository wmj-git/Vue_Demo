{"version":3,"sources":["webpack:///./src/utils/ol/fn.js","webpack:///./src/utils/ol/index.js","webpack:///./src/utils/ol/baseMap.js","webpack:///src/views/map/map.vue","webpack:///./src/views/map/map.vue?d8df","webpack:///./src/views/map/map.vue","webpack:///./src/api/geom.js","webpack:///./src/api/marker.js","webpack:///./src/api/tree.js"],"names":["$","__webpack_exports__","dataUrl","_Key","_clusterImgUrl","_distance","_featureKey","type","titleKey","iconUrl","k","_url","esrijsonFormat","ol","format","EsriJSON","vectorSource","source","Vector","loader","extent","resolution","projection","url","encodeURIComponent","getFeatures","length","console","log","ajax","async","dataType","success","response","error","message","details","join","features","readFeatures","featureProjection","_DATA","forEach","feature","setId","get","_keys","getKeys","_featureData","_key","getCoordinates","set","push","addFeatures","strategy","loadingstrategy","tile","tilegrid","createXYZ","tileSize","wrapX","clusterSource","Cluster","distance","styleCache","layer","name","layer_type","style","_data","size","Style","image","Icon","anchor","anchorXUnits","anchorYUnits","opacity","scale","color","src","text","Text","toString","fill","Fill","originalFeature","offsetX","offsetY","stroke","Stroke","width","layerFN","clustersFn","emMap","__WEBPACK_IMPORTED_MODULE_0__store__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_1__utils_vueBus__","formatDegree","pValue","value","Math","abs","v1","floor","round","createQeomStyle","_feature","_style","strokeWidth","JSON","parse","strokeColor","fillColor","_features","_geomStyle","geomType","_geomKey","i","coordinates","gpsLongitude","gpsLatitude","Feature","geometry","geom","Point","featureData","setStyle","LineString","Polygon","radius","circleIn4326","Circle","proj","transform","id","_clusterColor","iconUrlKey","_name","this","el","resolutions","map","view","Info","InfoOverlay","xfsMarker","xfsExptionObj","xfsExptionOverlays","fireObj","fireOverlays","personMarker","personLine","coordinate_container","coordinate_content","coordinate_closer","coordinate_overlay","measureSource","measureVector","helpTooltip_Overlays","measureTooltip_Overlays","sketch","helpTooltipElement","helpTooltip","measureTooltipElement","measureTooltip","continuePolygonMsg","continueLineMsg","measure_draw","scopeClick","evt","coordinate","appData","scopeFn","lng","lat","un","prototype","init","_LngLat","_layers","_this","_resolutions","View","center","zoom","maxZoom","minZoom","Map","controls","control","defaults","attribution","rotate","extend","target","layers","on","e","_map","_extent","getView","calculateExtent","getSize","_zoom","getCenter","getZoom","getLayers","getArray","_layer","_source","getSource","setDistance","append","document","getElementById","Overlay","element","positioning","stopEvent","offset","autoPan","autoPanAnimation","duration","addOverlay","InfoPointermoveFn","InfoClickFn","addLayer","viewFn","_num","_center","animate","xfsMarkerFn","data","_this2","removeLayer","clearXfsExptionOverlayFn","googleLang","googleLat","hydrantAvailableState","_popup","position","className","getElement","infoFn","content","css","personMarkerFn","_coordinate","axis","modelName","personLineFn","_coordinates","time","accountNo","_obj","_k","scope","scopeToolFn","_mapNmame","store","getters","window","forEachFeatureAtPixel","pixel","_type","getId","split","vueBus","$emit","fn","_Info","dragging","hide","getEventPixel","originalEvent","hit","hasFeatureAtPixel","OBJ","obj","_content","hydrantTypeCanme","addressInfo","_OBJ","alarmTimeStr","alarmLevelCname","alarmTypeCname","alarmAddress","alarmDesc","fireContent","dept","PhoneNumber","address","personContent","html","show","setPosition","coordinateLisen","_coordinateContent","_coordinateOverlay","toStringHDMS","toLonLat","innerHTML","coordinateOnFn","onclick","undefined","blur","coordinateOffFn","remove","removeOverlay","pointerMoveHandler","_helpTooltipElement","_helpTooltip","_continuePolygonMsg","_continueLineMsg","helpMsg","getGeometry","classList","formatLength","line","sphere","getLength","formatArea","polygon","area","getArea","addInteraction","interaction","Draw","lineDash","createMeasureTooltip","createHelpTooltip","listener","tooltipCoord","output","getInteriorPoint","getLastCoordinate","setOffset","Observable","unByKey","parentNode","removeChild","createElement","measureOn","removeInteraction","measureOff","measureClear","clear","addFireFn","_icon","_this3","_loop","_el","clearOverlayFn","_overlay","_overlays","utils_ol","db","openScene","mapName","baseMapFN","forEachPoint","func","input","opt_output","opt_dimension","len","dimension","slice","Array","sphericalMercator","RAD_PER_DEG","PI","forward","max","min","sin","inverse","atan","exp","baiduMercator","MCBAND","LLBAND","MC2LL","LL2MC","convertor","table","px","py","x","d","y","v","j","getLoop","y_abs","gcj02","AXIS","OFFSET","delta","wgLon","wgLat","ret","dLat","sqrt","dLon","transformLon","radLat","magic","sqrtMagic","cos","outOfChina","lon","toWGS84","deltaD","fromWGS84","bd09","X_PI","toGCJ02","z","theta","atan2","fromGCJ02","projzh","ll2smerc","smerc2ll","baiduMercatorProj","Projection","code","applyTransform","ll2bmerc","units","addProjection","addCoordinateTransforms","bmerc2ll","smerc2bmerc","bmerc2smerc","bmercResolutions","pow","baidu_vec","Tile","XYZ","tileUrlFunction","tileCoord","tileGrid","TileGrid","origin","baidu_img","baidu_cva","crtLayerWMTS","tk","projectionExtent","getExtent","getWidth","matrixIds","WMTS","attributions","substr","matrixSet","substring","getTopLeft","tLayer_vec","tLayer_img","osmLayer_vec","osmLayer_img","clustersLayerFn","props","methods","mapInit","Object","tools","spaceTimeBaseMap","toScene","zIndex","ESRICache","spaceTimeData","data_url","layer_name","_iconUrl","data_maker_iconUrl","_titleKey","maker_titleKey","_clustersColor","clusters_color","baseMapFn","layerName","xyz","trigger","measure_drawPloy","measure_drawLine","measure_clear","_zIndex","_lng","_lat","setZIndex","scene_data","data_type","queryVicinityPrintFn","geomDataFn","markerDataFn","_val","tree","params","longitude","latitude","then","statusCode","icon","api_name","_params","marker","bus","title","_this4","geom_style","geom_titleKey","_k2","created","$store","commit","control_type","control_id","mounted","_this5","$on","beforeDestroy","$off","map_map","render","_h","$createElement","_c","_self","staticClass","attrs","staticRenderFns","Component","normalizeComponent","ssrContext","request","method","__WEBPACK_IMPORTED_MODULE_0__utils_request__"],"mappings":"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","file":"static/js/1.7f190199d5c79a824c70.js","sourcesContent":["import store from '@/store'\r\nimport vueBus from '@/utils/vueBus'\r\n\r\n//经纬度换算\r\nfunction formatDegree(pValue) {\r\n  var value = Math.abs(pValue);\r\n  var v1 = Math.floor(value);\r\n  var v2 = Math.floor((value - v1) * 60);\r\n  var v3 = Math.round((value - v1) * 3600 % 60);\r\n  return v1 + '°' + v2 + '\\'' + v3 + '\"';\r\n}\r\n\r\n\r\nexport function createQeomStyle(_feature, _style) {\r\n  let Style = null;\r\n  switch (_style.type) {\r\n    case \"1\":\r\n      Style = new ol.style.Style({\r\n        stroke: new ol.style.Stroke({\r\n          width: _style.strokeWidth,\r\n          color:  JSON.parse(_style.strokeColor)\r\n        }),\r\n        fill: new ol.style.Fill({\r\n          color: JSON.parse(_style.fillColor)\r\n        }),\r\n        text: new ol.style.Text({\r\n          text: _feature[_style.titleKey] ? _feature[_style.titleKey] + \"\" : \"\",\r\n          offsetX: 0,\r\n          offsetY: -28,\r\n          fill: new ol.style.Fill({\r\n            color: '#fff'\r\n          }),\r\n          stroke: new ol.style.Stroke({\r\n            color: 'rgba(0, 0, 0, 0.6)',\r\n            width: 4\r\n          }),\r\n        })\r\n      });\r\n      break;\r\n    case \"2\"://text形式\r\n      Style = new ol.style.Style({\r\n        text: new ol.style.Text({\r\n          text: _feature[_style.titleKey] ? _feature[_style.titleKey] + \"\" : \"\",\r\n          fill: new ol.style.Fill({\r\n            color: JSON.parse(_style.fillColor)\r\n          }),\r\n          stroke: new ol.style.Stroke({\r\n            color: JSON.parse(_style.strokeColor),\r\n            width: _style.strokeWidth\r\n          }),\r\n        })\r\n      });\r\n      break;\r\n\r\n  }\r\n  return Style;\r\n}\r\n\r\n//获取时空云数据\r\nexport function clustersLayerFn(dataUrl, _Key, _clusterImgUrl, _distance) {//时空云数据\r\n  // let _extent = [113.97796915, 22.608145238000002, 114.04398656100001, 22.704755608];\r\n\r\n\r\n  let _featureKey = {\r\n    type: \"typeName\",//类型\r\n    titleKey: \"id\",//标题\r\n    iconUrl: \"\"//图标地址\r\n  };\r\n  for (let k in _featureKey) {\r\n    if (_Key[k]) {\r\n      _featureKey[k] = _Key[k];\r\n    }\r\n  }\r\n  let _url = dataUrl ? dataUrl : \"\";\r\n  let esrijsonFormat = new ol.format.EsriJSON();\r\n  let vectorSource = new ol.source.Vector({\r\n    loader: function (extent, resolution, projection) {\r\n      var url = _url + '/query/?f=json&' +\r\n        'returnGeometry=true&spatialRel=esriSpatialRelIntersects&geometry=' +\r\n        encodeURIComponent('{\"xmin\":' + extent[0] + ',\"ymin\":' +\r\n          extent[1] + ',\"xmax\":' + extent[2] + ',\"ymax\":' + extent[3] +\r\n          ',\"spatialReference\":{\"wkid\":4490}}') +\r\n        '&geometryType=esriGeometryEnvelope&inSR=4490&outFields=*' +\r\n        '&outSR=4490';\r\n\r\n      if (vectorSource.getFeatures().length > 0) {\r\n        // vectorSource.clear();\r\n        console.log(vectorSource.getFeatures());\r\n        return\r\n      }\r\n\r\n      $.ajax({\r\n        url: url, async: true, dataType: 'json', success: function (response) {\r\n          /* console.log(\"response\");\r\n           console.log(response);*/\r\n          if (response.error) {\r\n            console.log(response.error.message + '\\n' +\r\n              response.error.details.join('\\n'));\r\n          } else {\r\n            // dataProjection will be read from document\r\n            var features = esrijsonFormat.readFeatures(response, {\r\n              featureProjection: projection\r\n            });\r\n            if (features.length > 0) {\r\n              let _DATA = [];\r\n              features.forEach(function (feature) {\r\n                feature.setId(_featureKey.type + \"_\" + feature.get(_featureKey.titleKey));\r\n                let _keys = feature.getKeys();\r\n                let _featureData = {};\r\n                _keys.forEach(function (_key) {\r\n\r\n                  if (_key === \"geometry\") {\r\n\r\n                  } else {\r\n                    _featureData[_key] = feature.get(_key);\r\n                  }\r\n                });\r\n                _featureData[\"coordinates\"] = feature.get(\"geometry\").getCoordinates();\r\n                feature.set(\"featureData\", _featureData);\r\n                _DATA.push(_featureData);\r\n              });\r\n              console.log(\"features2\");\r\n              // console.log(features);\r\n              console.log(_DATA);\r\n              vectorSource.addFeatures(features);\r\n\r\n            }\r\n          }\r\n        }\r\n      });\r\n    },\r\n    strategy: ol.loadingstrategy.tile(ol.tilegrid.createXYZ({\r\n      tileSize: 512\r\n    })),\r\n    wrapX: false\r\n  });\r\n\r\n\r\n  let clusterSource = new ol.source.Cluster({\r\n    distance: _distance,\r\n    source: vectorSource\r\n  });\r\n\r\n  function createEarthquakeStyle(iconFeature) {\r\n\r\n    // console.log(iconFeature.getKeys());\r\n\r\n\r\n    let _data = iconFeature.get(_featureKey.titleKey);\r\n\r\n    let iconStyle = new ol.style.Style({\r\n      image: new ol.style.Icon(({\r\n        anchor: [0, 0],\r\n        anchorXUnits: 'fraction',\r\n        anchorYUnits: 'pixels',\r\n        scale: 0.4,\r\n        src: _featureKey.iconUrl + \"\"\r\n      })),\r\n      text: new ol.style.Text({\r\n        text: _data + \"\",\r\n        // text:  \"123\",\r\n        offsetX: 12,\r\n        offsetY: -8,\r\n        fill: new ol.style.Fill({\r\n          color: '#fff'\r\n        }),\r\n        stroke: new ol.style.Stroke({\r\n          color: 'rgba(0, 0, 0, 0.6)',\r\n          width: 4\r\n        }),\r\n      })\r\n    });\r\n\r\n    return iconStyle;\r\n  }\r\n\r\n  let styleCache = {};\r\n  let layer = new ol.layer.Vector({\r\n    name: _featureKey.type + \"_layer\",\r\n    layer_type: \"Cluster\",\r\n    source: clusterSource,\r\n    style: function (feature) {\r\n      var size = feature.get('features').length;\r\n      // console.log(feature.get('features'));\r\n      var style = styleCache[size];\r\n      if (size > 1) {\r\n        if (!style) {\r\n          style = new ol.style.Style({\r\n            image: new ol.style.Icon(({\r\n              anchor: [0.5, 28],\r\n              anchorXUnits: 'fraction',\r\n              anchorYUnits: 'pixels',\r\n              opacity: 0.8,\r\n              scale: 1.28,\r\n              color: _clusterImgUrl,\r\n              src: \"../../static/image/cluster.png\"\r\n            })),\r\n            text: new ol.style.Text({\r\n              text: size.toString(),\r\n              fill: new ol.style.Fill({\r\n                color: '#fff'\r\n              })\r\n            })\r\n          });\r\n          styleCache[size] = style;\r\n        }\r\n      } else {\r\n        var originalFeature = feature.get('features')[0];\r\n        style = createEarthquakeStyle(originalFeature);\r\n      }\r\n      return style;\r\n    }\r\n  });\r\n\r\n  return {\r\n    layer, vectorSource, clusterSource\r\n  }\r\n}\r\n\r\n//几何类型没有聚合的数据图层\r\nexport function layerFN(_features, _Key, _geomStyle) {\r\n\r\n  let features = [];\r\n  let source = null;\r\n  let layer = null;\r\n\r\n  let _featureKey = {\r\n    type: \"layerName\",//类型\r\n    geomType: \"Point\",//几何对象类型\r\n  };\r\n  for (let k in _featureKey) {\r\n    if (_Key[k]) {\r\n      _featureKey[k] = _Key[k];\r\n    }\r\n  }\r\n\r\n  let _geomKey = {\r\n    type: \"\",//样式类型\r\n    titleKey: \"id\",//标题\r\n    strokeWidth: 2,\r\n    strokeColor: \"[255, 0, 0, 1.0]\",\r\n    fillColor: \"[0, 0, 255, 1.0]\"\r\n  };\r\n  for (let k in _geomKey) {\r\n    if (_geomStyle[k]) {\r\n      _geomKey[k] = _geomStyle[k];\r\n    }\r\n  }\r\n\r\n\r\n  source = new ol.source.Vector({\r\n    wrapX: false\r\n  });\r\n\r\n\r\n  console.log(_features);\r\n  for (let i = 0; i < _features.length; ++i) {\r\n\r\n    if (_featureKey.geomType === \"point\") {//点\r\n      let coordinates = [_features[i].gpsLongitude, _features[i].gpsLatitude];\r\n      features[i] = new ol.Feature({\r\n        geometry: new ol.geom.Point(coordinates),\r\n        featureData: _features[i]\r\n      });\r\n    } else if (_featureKey.geomType === \"text\") {//文本\r\n      let coordinates = [_features[i].gpsLongitude, _features[i].gpsLatitude];\r\n      features[i] = new ol.Feature({\r\n        geometry: new ol.geom.Point(coordinates),\r\n        featureData: _features[i]\r\n      });\r\n      features[i].setStyle(createQeomStyle(_features[i], _geomKey));\r\n    } else if (_featureKey.geomType === \"line\") {//线\r\n\r\n      let coordinates = _features[i].coordinates ? _features[i].coordinates : [];\r\n      features[i] = new ol.Feature({\r\n        geometry: new ol.geom.LineString(coordinates),\r\n        featureData: _features[i]\r\n      });\r\n      features[i].setStyle(createQeomStyle(_features[i], _geomKey));\r\n    } else if (_featureKey.geomType === \"polygon\") {//多边形\r\n      let coordinates = _features[i].coordinates ? _features[i].coordinates : [];\r\n      features[i] = new ol.Feature({\r\n        geometry: new ol.geom.Polygon(coordinates),\r\n        featureData: _features[i]\r\n      });\r\n      features[i].setStyle(createQeomStyle(_features[i], _geomKey));\r\n    } else if (_featureKey.geomType === \"circle\") {//圆\r\n      let coordinates = [_features[i].gpsLongitude, _features[i].gpsLatitude];\r\n      let radius = _features[i].radius ? _features[i].radius : 10;\r\n      let circleIn3857 = new ol.geom.Circle(ol.proj.transform(coordinates, 'EPSG:4326', 'EPSG:3857'), radius, 'XY');\r\n      let circleIn4326 = circleIn3857.transform('EPSG:3857', 'EPSG:4326');\r\n\r\n      features[i] = new ol.Feature({\r\n        geometry: circleIn4326,\r\n        featureData: _features[i]\r\n      });\r\n\r\n      features[i].setStyle(createQeomStyle(_features[i], _geomKey));\r\n    }\r\n\r\n    features[i].setId(_featureKey.geomType+\"_\"+_featureKey.type + \"_\" + _features[i].id);\r\n  }\r\n\r\n\r\n  source.addFeatures(features);\r\n  layer = new ol.layer.Vector({\r\n    name: _featureKey.type + \"_layer\",\r\n    layer_type: \"Layer\",\r\n    source: source\r\n  });\r\n\r\n  return {\r\n    features: features,\r\n    source: source,\r\n    layer: layer\r\n  }\r\n}\r\n\r\n//移除图层\r\nexport function ClearLayerFN(_map, _layers) {\r\n  console.log(Array.isArray(_layers));\r\n  if (Array.isArray(_layers)) {\r\n    _layers.forEach(function (_layer) {\r\n      _map.removeLayer(_layer);\r\n    });\r\n  }\r\n}\r\n\r\n//有聚合的数据图层\r\nexport function clustersFn(_features, _Key, _clusterColor, _distance) {//_features:数据, _Key:属性配置, _clusterImgUrl:聚合图标\r\n\r\n  /* _features=[{\r\n            id:\"\",\r\n            lng:\"\",\r\n            lat:\"\",\r\n            _Key.iconUrlKey:\"\",\r\n            ...\r\n   }]*/\r\n\r\n  let _featureKey = {\r\n    type: \"typeName\",//类型\r\n    titleKey: \"id\",//标题\r\n    iconUrlKey: \"iconUrl\"//图标地址\r\n  };\r\n  for (let k in _featureKey) {\r\n    if (_Key[k]) {\r\n      _featureKey[k] = _Key[k];\r\n    }\r\n  }\r\n\r\n  let features = [];\r\n  for (let i = 0; i < _features.length; ++i) {\r\n    let coordinates = [_features[i].gpsLongitude, _features[i].gpsLatitude];\r\n\r\n    features[i] = new ol.Feature({\r\n      geometry: new ol.geom.Point(coordinates),\r\n      featureData: _features[i]\r\n    });\r\n    features[i].setId(\"marker_\"+_featureKey.type + \"_\" + _features[i].id);\r\n  }\r\n\r\n  let clusterSource = new ol.source.Cluster({\r\n    distance: _distance,\r\n    source: new ol.source.Vector({\r\n      features: features\r\n    })\r\n  });\r\n\r\n  function createEarthquakeStyle(iconFeature) {\r\n\r\n    // console.log(iconFeature.get(\"featureData\")[_iconKey]);\r\n    let _data = iconFeature.get(\"featureData\");\r\n    let iconStyle = new ol.style.Style({\r\n      image: new ol.style.Icon(({\r\n        anchor: [32, 62],\r\n        anchorXUnits: 'pixels',\r\n        anchorYUnits: 'pixels',\r\n        scale: 0.4,\r\n        src: _data[_featureKey.iconUrlKey] + \"\"\r\n      })),\r\n      text: new ol.style.Text({\r\n        text: _data[_featureKey.titleKey] + \"\",\r\n        offsetX: 0,\r\n        offsetY: -32,\r\n        fill: new ol.style.Fill({\r\n          color: '#fff'\r\n        }),\r\n        stroke: new ol.style.Stroke({\r\n          color: 'rgba(0, 0, 0, 0.6)',\r\n          width: 4\r\n        }),\r\n      })\r\n    });\r\n\r\n    return iconStyle;\r\n  }\r\n\r\n  let styleCache = {};\r\n  let clusterLayer = new ol.layer.Vector({\r\n    name: _featureKey.type + \"_layer\",\r\n    layer_type: \"Cluster\",\r\n    source: clusterSource,\r\n    style: function (feature) {\r\n      var size = feature.get('features').length;\r\n      var style = styleCache[size];\r\n      if (size > 1) {\r\n        if (!style) {\r\n          style = new ol.style.Style({\r\n            image: new ol.style.Icon(({\r\n              anchor: [0.5, 28],\r\n              anchorXUnits: 'fraction',\r\n              anchorYUnits: 'pixels',\r\n              opacity: 0.8,\r\n              scale: 1.28,\r\n              color: _clusterColor,\r\n              src: \"../../static/image/cluster.png\"\r\n            })),\r\n            text: new ol.style.Text({\r\n              text: size.toString(),\r\n              fill: new ol.style.Fill({\r\n                color: '#fff'\r\n              })\r\n            })\r\n          });\r\n          styleCache[size] = style;\r\n        }\r\n      } else {\r\n        // clusterSource.setDistance(0);\r\n        var originalFeature = feature.get('features')[0];\r\n        // console.log(originalFeature);\r\n        style = createEarthquakeStyle(originalFeature);\r\n      }\r\n      return style;\r\n    }\r\n  });\r\n\r\n  return {\r\n    features: features,\r\n    source: clusterSource,\r\n    layer: clusterLayer\r\n  }\r\n\r\n}\r\n\r\nfunction treeContent(_OBJ) {//消防栓信息显示模板\r\n /* console.log(\"OBJ\");\r\n  console.log(_OBJ);*/\r\n  let obj = _OBJ.content;\r\n  let _content = '<ul type=\"none\" style=\"margin: 0px;padding:0px;font-size:22px;\" >' +\r\n    '<li>编号：' + (obj.id || \"无\") + '<\\/li>' +\r\n    '<li>规格型号：' + 'DN65*2,' + obj.hydrantTypeCanme + '<\\/li>' +\r\n    '<li>安装位置：' + obj.addressInfo + '<\\/li>' +\r\n    '<\\/ul>';\r\n\r\n  return _content;\r\n}\r\n\r\nfunction personContent(_OBJ) {//消防栓信息显示模板\r\n\r\n  let _data = _OBJ.content;\r\n\r\n  let _content = '<ul type=\"none\" style=\"margin: 0px;padding:0px;font-size: 22px\">' +\r\n    '<li>姓   名：' + _data.name + '<\\/li>' +\r\n    '<li>单   位：' + _data.dept + '<\\/li>' +\r\n    '<li>电   话：' + _data.PhoneNumber + '<\\/li>' +\r\n    '<li>位   置：' + _data.address + '<\\/li>' +\r\n    '<\\/ul>';\r\n\r\n  return _content;\r\n}\r\n\r\nfunction fireContent(_OBJ) {//火警信息显示模板\r\n\r\n  let _data = _OBJ.content;\r\n\r\n  let _content = '<ul type=\"none\" style=\"margin: 0px;padding:0px;font-size:22px;\">' +\r\n    '<li>报警时间：' + (_data.alarmTimeStr || \"无\") + '<\\/li>' +\r\n    '<li>报警等级：' + (_data.alarmLevelCname || \"无\") + '<\\/li>' +\r\n    '<li>报警类型：' + (_data.alarmTypeCname || \"无\") + '<\\/li>' +\r\n    '<li>报警位置：' + (_data.alarmAddress || \"无\") + '<\\/li>' +\r\n    '<li>报警描述：' + (_data.alarmDesc || \"无\") + '<\\/li>' +\r\n    '<\\/ul>' +\r\n    '<ul type=\"none\" style=\"margin: 0px;padding:0 0 0 18px;font-size:22px;\"  class=\"list_style_main\">' +\r\n    '<li>' +\r\n    '<input type=\"button\"  value=' + \"派遣任务\" + ' onclick=\"fireDispatchFn()\">' +\r\n    '<\\/li>' +\r\n    '<li>' +\r\n    '<input type=\"button\"  value=' + \"解除报警\" + ' onclick=\"fireCloseFn()\">' +\r\n    '<\\/li>' +\r\n    '<\\/ul>';\r\n\r\n  return _content;\r\n}\r\n\r\n\r\nexport function emMap(_name) {\r\n  this.el = _name;\r\n  this.resolutions = [\r\n    5.9486525145757E-4, 2.97432625728785E-4,\r\n    1.5228550437313792E-4, 7.614275218656896E-5,\r\n    3.807137609328448E-5, 1.903568804664224E-5,\r\n    9.51784402332112E-6, 4.75892201166056E-6,\r\n    2.37946100583028E-6, 1.18973050291514E-6,\r\n    5.9486525145757E-7, 2.97432625728785E-7];\r\n  this.map = null;\r\n  this.view = null;\r\n  // 信息框\r\n  this.Info = null;\r\n  this.InfoOverlay = null;\r\n\r\n  // 消防栓\r\n  this.xfsMarker = null;\r\n  this.xfsExptionObj = null;\r\n  this.xfsExptionOverlays = [];\r\n\r\n  // 火警\r\n  this.fireObj = null;\r\n  this.fireOverlays = [];\r\n\r\n  // 人员\r\n  this.personMarker = null;\r\n  //人员轨迹\r\n  this.personLine = null;\r\n\r\n  // 坐标\r\n  this.coordinate_container = null;\r\n  this.coordinate_content = null;\r\n  this.coordinate_closer = null;\r\n  this.coordinate_overlay = null;\r\n\r\n  //测量\r\n  this.measureSource = null;\r\n  this.measureVector = null;\r\n  this.helpTooltip_Overlays = [];\r\n  this.measureTooltip_Overlays = [];\r\n  this.sketch = null;\r\n  this.helpTooltipElement = null;\r\n  this.helpTooltip = null;\r\n  this.measureTooltipElement = null;\r\n  this.measureTooltip = null;\r\n  this.continuePolygonMsg = '测量面积';\r\n  this.continueLineMsg = '测量距离';\r\n  this.measure_draw = null;\r\n\r\n}\r\n\r\nemMap.prototype.init = function (_LngLat, _layers) {\r\n\r\n  let _this = this;\r\n  let _resolutions = this.resolutions;\r\n  this.view = new ol.View({\r\n    resolutions: _resolutions,\r\n    center: _LngLat,\r\n    zoom: 0,\r\n    maxZoom: 19,\r\n    minZoom: 0,\r\n    projection: 'EPSG:4326',\r\n  });\r\n  this.map = new ol.Map({\r\n    controls: ol.control.defaults({attribution: false, zoom: false, rotate: true}).extend([\r\n      //new ol.control.LayerSwitcher({ trash: false, extent: true }),\r\n      //new ol.control.ScaleLine(),\r\n      //new ol.control.Zoom({ target: undefined}),\r\n      //new ol.control.Rotate({\r\n      // autoHide: true,\r\n      // label: “N”\r\n      //}),\r\n      //new ol.control.MeasureTool({ sphereradius: 6378137 })\r\n    ]),\r\n    target: _this.el,\r\n    layers: _layers,\r\n    view: _this.view\r\n  });\r\n  this.map.on('moveend', function (e) {\r\n    let _map = e.map;\r\n    let _extent = _map.getView().calculateExtent(_map.getSize());\r\n    let _point = ol.extent.getCenter(_extent);\r\n    // console.log(_point);\r\n    /* $.each(appData.gis, function (i, n) {\r\n       n.GisIcon(_point[0], _point[1]);\r\n       n.GisView(_point[0], _point[1]);\r\n     });*/\r\n\r\n    let _zoom = _this.view.getZoom();\r\n    // console.log(_zoom);\r\n\r\n    let _layers = _map.getLayers().getArray();\r\n    if (_zoom > 6) {\r\n      _layers.forEach(function (_layer) {\r\n        let _source = _layer.getSource();\r\n        if (_layer.get(\"layer_type\") === \"Cluster\") {\r\n          _source.setDistance(0);\r\n        }\r\n      });\r\n    } else {\r\n      _layers.forEach(function (_layer) {\r\n        let _source = _layer.getSource();\r\n        if (_layer.get(\"layer_type\") === \"Cluster\") {\r\n          _source.setDistance(50);\r\n        }\r\n      });\r\n    }\r\n  });\r\n\r\n  $(\"body\").append(`<div id=\"em_ol_info\" class=\"em-tooltip em-tooltip-static\" style=\"z-index: 800\"></div>`);\r\n  this.Info = document.getElementById('em_ol_info');\r\n  this.InfoOverlay = new ol.Overlay({\r\n    element: this.Info,\r\n    positioning: 'bottom-center',\r\n    stopEvent: false,\r\n    offset: [6, -32],\r\n    autoPan: true,\r\n    autoPanAnimation: {\r\n      duration: 100\r\n    }\r\n  });\r\n  this.map.addOverlay(this.InfoOverlay);\r\n  this.map.on('pointermove', this.InfoPointermoveFn);\r\n  this.map.on('click', this.InfoClickFn);\r\n\r\n\r\n  // 测量\r\n  this.measureSource = new ol.source.Vector();\r\n  this.measureVector = new ol.layer.Vector({\r\n    source: this.measureSource,\r\n    style: new ol.style.Style({\r\n      fill: new ol.style.Fill({\r\n        color: 'rgba(255, 255, 255, 0.4)'\r\n      }),\r\n      stroke: new ol.style.Stroke({\r\n        color: '#ffcc33',\r\n        width: 2\r\n      }),\r\n      image: new ol.style.Circle({\r\n        radius: 7,\r\n        fill: new ol.style.Fill({\r\n          color: '#ffcc33'\r\n        })\r\n      })\r\n    })\r\n  });\r\n  this.map.addLayer(this.measureVector);\r\n};\r\nemMap.prototype.viewFn = function (_num, _center) {\r\n  if (_center === \"none\") {\r\n    this.view.animate({\r\n      zoom: _num,\r\n    });\r\n  } else {\r\n    this.view.animate({\r\n      center: _center,\r\n      zoom: _num,\r\n      duration: 100\r\n    });\r\n  }\r\n\r\n};\r\n\r\nemMap.prototype.xfsMarkerFn = function (data) {\r\n  let _this = this;\r\n  let _data = data;\r\n  //创建图片对象\r\n  var icon = \"images/hybrant_mark_ok.png\";\r\n  var icon1 = \"images/hybrant_mark_success1.png\";\r\n  var icon2 = \"images/hybrant_mark_success2.gif\";\r\n  var icon3 = \"images/hybrant_mark_success3.png\";\r\n  var icon4 = \"images/hybrant_mark_success2.png\";\r\n\r\n\r\n  if (this.xfsMarker) {\r\n    this.map.removeLayer(this.xfsMarker.layer);\r\n    this.clearXfsExptionOverlayFn();\r\n  }\r\n\r\n  for (var i = 0; i < _data.length; i++) {\r\n\r\n    _data[i].lng = _data[i].googleLang;\r\n    _data[i].lat = _data[i].googleLat;\r\n\r\n    if (_data[i].hydrantAvailableState === 28) {\r\n      _data[i].iconUrl = icon;\r\n\r\n    } else if (_data[i].hydrantAvailableState === 29) {\r\n      _data[i].iconUrl = icon1;\r\n\r\n    } else if (_data[i].hydrantAvailableState === 31) {\r\n      _data[i].iconUrl = icon3;\r\n\r\n    } else {\r\n      if (_data[i].id <= 465) {\r\n        _data[i].iconUrl = icon2;\r\n\r\n        $(\"body\").append(`<img id=\"xfs${data[i].id}\" src=\"images/hybrant_mark_success2.gif\" style=\"width:28px;height:34px;\"/>`);\r\n        let _popup = new ol.Overlay({\r\n          id: \"xfs_\" + _data[i].id,\r\n          position: [_data[i].lng, _data[i].lat],\r\n          element: document.getElementById('xfs' + data[i].id),\r\n          className: \"xfs-overlay\"\r\n        });\r\n        _popup.set(\"overlayData\", _data[i]);\r\n        this.xfsExptionOverlays.push(_popup);\r\n        this.map.addOverlay(_popup);\r\n        $(_popup.getElement()).on('click', function () {\r\n          let _data = _popup.get(\"overlayData\");\r\n          // _this.xfsExptionObj = _data;\r\n          _this.infoFn({\r\n            type: \"xfs\",\r\n            content: _data,\r\n            lng: _data.googleLang,\r\n            lat: _data.googleLat\r\n          });\r\n        }).on(\"mouseover\", function () {\r\n          $(this).css(\"cursor\", 'pointer');\r\n        });\r\n\r\n      } else {\r\n        _data[i].iconUrl = icon4;\r\n      }\r\n    }\r\n  }\r\n\r\n  this.xfsMarker = clustersFn(_data, {\r\n    type: \"xfs\",\r\n    titleKey: \"id\",\r\n    iconUrlKey: \"iconUrl\"\r\n  }, \"images/cluster0.png\", 50);\r\n  this.map.addLayer(this.xfsMarker.layer);\r\n};\r\n// 添加人员标注\r\nemMap.prototype.personMarkerFn = function (data) {//添加覆盖物\r\n  let _data = data;\r\n  console.log(_data);\r\n\r\n  //创建图片对象\r\n  let _icon = \"images/men.png\";\r\n\r\n  for (let i = 0; i < _data.length; i++) {\r\n    let _coordinate = _data[i].axis;\r\n    _data[i].id = _data[i].modelName;\r\n    _data[i].lng = _coordinate[0];\r\n    _data[i].lat = _coordinate[1];\r\n    _data[i].iconUrl = _icon;\r\n\r\n  }\r\n  if (this.personMarker) {\r\n    this.map.removeLayer(this.personMarker.layer);\r\n  }\r\n  this.personMarker = clustersFn(_data, {\r\n    type: \"person\",\r\n    titleKey: \"name\",\r\n    iconUrlKey: \"iconUrl\"\r\n  }, \"images/men.png\", 0);\r\n  this.map.addLayer(this.personMarker.layer);\r\n\r\n};\r\n//添加人员轨迹\r\nemMap.prototype.personLineFn = function (data) {//添加覆盖物\r\n  let _data = data;\r\n  console.log(_data);\r\n  if (data.length <= 0) {\r\n    return\r\n  }\r\n  let _feature = {\r\n    id: \"\",\r\n    coordinates: []\r\n  };\r\n  let _coordinates = [];\r\n  for (let i = 0; i < _data.length; i++) {\r\n    _coordinates.push([_data[i].googleLang, _data[i].googleLat]);\r\n  }\r\n  _feature.id = _data[0].time;\r\n  _feature.accountNo = _data[0].accountNo;\r\n  _feature.coordinates = _coordinates;\r\n\r\n  if (this.personLine) {\r\n    this.map.removeLayer(this.personLine.layer);\r\n  }\r\n  this.personLine = layerFN([_feature], {\r\n    type: \"line\",\r\n    geomType: \"LineString\"\r\n  }, {\r\n    titleKey: \"accountNo\",//标题\r\n    strokeWidth: 2,\r\n    strokeColor: [0, 255, 0, 1.0],\r\n    fillColor: [0, 0, 255, 1.0]\r\n  });\r\n  this.map.addLayer(this.personLine.layer);\r\n};\r\n//范围查询功能\r\nemMap.prototype.scopeFn = function (data) {//添加覆盖物\r\n\r\n  let _data = data;\r\n  console.log(_data);\r\n  if (data.length <= 0) {\r\n    return\r\n  }\r\n  let _features = [];\r\n  let _feature = {\r\n    id: \"1\",\r\n    lng: 0,\r\n    lat: 0,\r\n    radius: 0\r\n  };\r\n\r\n  _data.forEach(function (_obj) {\r\n    for (let _k in _feature) {\r\n      _feature[_k] = _obj[_k];\r\n    }\r\n    _features.push(_feature);\r\n  });\r\n\r\n  if (this.scope) {\r\n    this.map.removeLayer(this.scope.layer);\r\n\r\n  }\r\n  this.scope = layerFN(_features, {\r\n    type: \"scope\",\r\n    geomType: \"Circle\"\r\n  }, {\r\n    titleKey: \"name\",//标题\r\n    strokeWidth: 2,\r\n    strokeColor: [0, 255, 0, 1.0],\r\n    fillColor: [0, 0, 255, 0.4]\r\n  });\r\n  this.map.addLayer(this.scope.layer);\r\n};\r\n\r\nfunction scopeClick(evt) {\r\n  let coordinate = evt.coordinate;\r\n  console.log(coordinate);\r\n  appData.map.scopeFn([{\r\n    id: \"1\",\r\n    lng: coordinate[0],\r\n    lat: coordinate[1],\r\n    radius: 100\r\n  }]);\r\n  appData.map.map.un('click', scopeClick);\r\n}\r\n\r\nemMap.prototype.scopeToolFn = function () {//添加覆盖物\r\n  let _this = this;\r\n  if (_this.scope) {\r\n    _this.map.removeLayer(_this.scope.layer);\r\n  }\r\n  _this.map.on('click', scopeClick);\r\n};\r\n\r\n// display popup on click\r\nemMap.prototype.InfoClickFn = function (evt) {\r\n  console.log(evt);\r\n\r\n  let _this = null;\r\n  let _mapNmame = store.getters[\"scene/type\"];\r\n  if (window[_mapNmame]) {\r\n    _this = window[_mapNmame];\r\n  } else {\r\n    return\r\n  }\r\n\r\n\r\n\r\n  let feature = evt.map.forEachFeatureAtPixel(evt.pixel,\r\n    function (feature) {\r\n      return feature;\r\n    });\r\n  if (feature) {\r\n    console.log(feature);\r\n\r\n    if (feature.get('features') && feature.get('features').length === 1) {\r\n      let _feature = feature.get('features')[0];\r\n      let _type = _feature.getId().split(\"_\");\r\n\r\n      vueBus.$emit(\"set_drawer\", {\r\n        fn:\"showFN\",\r\n        type: _type[0],\r\n        content: _feature.get(\"featureData\")\r\n      });\r\n\r\n\r\n    } else if (feature.get(\"featureData\")) {\r\n\r\n      let _type = feature.getId().split(\"_\");\r\n\r\n      vueBus.$emit(\"set_drawer\", {\r\n        fn:\"showFN\",\r\n        type: _type[0],\r\n        content: feature.get(\"featureData\"),\r\n      });\r\n\r\n    } else {\r\n      return\r\n    }\r\n  }\r\n};\r\n// change mouse cursor when over marker\r\nemMap.prototype.InfoPointermoveFn = function (evt) {\r\n\r\n  let _this = null;\r\n  let _mapNmame = store.getters[\"scene/type\"];\r\n  if (window[_mapNmame]) {\r\n    _this = window[_mapNmame];\r\n  } else {\r\n    return\r\n  }\r\n\r\n  let _Info = _this.Info;\r\n\r\n  if (evt.dragging) {\r\n    $(_Info).hide();\r\n    return;\r\n  }\r\n\r\n\r\n  let pixel = evt.map.getEventPixel(evt.originalEvent);\r\n  let hit = evt.map.hasFeatureAtPixel(pixel);\r\n  $(\"#\"+_mapNmame).css(\"cursor\", hit ? 'pointer' : '');\r\n\r\n\r\n  let feature = evt.map.forEachFeatureAtPixel(evt.pixel, function (feature) {\r\n    return feature;\r\n  });\r\n  if (feature) {\r\n    let _coordinate = evt.coordinate;\r\n    // console.log(evt.coordinate);\r\n\r\n    if (feature.get('features') && feature.get('features').length === 1) {\r\n      let _feature = feature.get('features')[0];\r\n      let _type = _feature.getId().split(\"_\");\r\n      _this.infoFn({\r\n        type: _type[0],\r\n        content: _feature.get(\"featureData\"),\r\n        // lng: _feature.get(\"featureData\").gpsLongitude,\r\n        // lat: _feature.get(\"featureData\").gpsLatitude\r\n        lng: _coordinate[0],\r\n        lat: _coordinate[1]\r\n      });\r\n    } else if (feature.get(\"featureData\")) {\r\n      let _type = feature.getId().split(\"_\");\r\n      _this.infoFn({\r\n        type: _type[0],\r\n        content: feature.get(\"featureData\"),\r\n        lng: _coordinate[0],\r\n        lat: _coordinate[1]\r\n      });\r\n    } else {\r\n      return;\r\n    }\r\n\r\n\r\n  } else {\r\n    // $(_Info).hide();\r\n  }\r\n\r\n\r\n};\r\nemMap.prototype.infoFn = function (OBJ) {\r\n\r\n  /*OBJ={\r\n      type: \"info\",\r\n      content: data,\r\n      lng: data.googleLang,\r\n      lat: data.googleLat\r\n  }*/\r\n\r\n  let _content;\r\n  if (OBJ.type && OBJ.type === \"info\") {\r\n    _content = '<span style=\"color: white\">' + OBJ.content + '<\\/span>';\r\n  } else if (OBJ.type && OBJ.type === \"tree\") {\r\n    _content = treeContent(OBJ);\r\n  } else if (OBJ.type && OBJ.type === \"fire\") {\r\n    _content = fireContent(OBJ);\r\n  } else if (OBJ.type && OBJ.type === \"person\") {\r\n    _content = personContent(OBJ);\r\n  } else {\r\n    let _Content = OBJ.lng;\r\n    _content = '<span style=\"color: white;\">' + _Content + '<\\/span>';\r\n    // return\r\n  }\r\n\r\n  $(this.Info).html(_content);\r\n  $(this.Info).show();\r\n  this.InfoOverlay.setPosition([OBJ.lng, OBJ.lat]);\r\n};\r\n\r\n\r\n//坐标查询\r\nemMap.prototype.coordinateLisen = function (evt) {\r\n\r\n  let _coordinateContent = null;\r\n  let _coordinateOverlay = null;\r\n  let _mapNmame = store.getters[\"scene/type\"];\r\n  console.log(window[_mapNmame]);\r\n  if (window[_mapNmame]) {\r\n    _coordinateContent = window[_mapNmame].coordinate_content;\r\n    _coordinateOverlay = window[_mapNmame].coordinate_overlay;\r\n  } else {\r\n    return\r\n  }\r\n  let coordinate = evt.coordinate;\r\n  let hdms = ol.coordinate.toStringHDMS(ol.proj.toLonLat(coordinate));\r\n\r\n  _coordinateContent.innerHTML = '经：<code>' + formatDegree(coordinate[0]) + '</code>,<br>纬：<code>' + formatDegree(coordinate[1]) + '</code>';\r\n  console.log(coordinate);\r\n  _coordinateOverlay.setPosition(coordinate);\r\n};\r\nemMap.prototype.coordinateOnFn = function () {\r\n  let _this = this;\r\n\r\n  $(\"body\").append(`\r\n        <div id=\"coordinate\" class=\"ol-popup\">\r\n            <a href=\"#\" id=\"coordinate_closer\" class=\"ol-popup-closer\"></a>\r\n            <div id=\"coordinate_content\"></div>\r\n        </div>\r\n    `);\r\n\r\n  this.coordinate_container = document.getElementById('coordinate');\r\n  this.coordinate_content = document.getElementById('coordinate_content');\r\n  this.coordinate_closer = document.getElementById('coordinate_closer');\r\n\r\n  this.coordinate_overlay = new ol.Overlay({\r\n    element: this.coordinate_container,\r\n    autoPan: true,\r\n    autoPanAnimation: {\r\n      duration: 100\r\n    }\r\n  });\r\n\r\n  this.coordinate_closer.onclick = function () {\r\n    _this.coordinate_overlay.setPosition(undefined);\r\n    _this.coordinate_closer.blur();\r\n    return false;\r\n  };\r\n  this.map.addOverlay(this.coordinate_overlay);\r\n  this.map.on('singleclick', this.coordinateLisen);\r\n\r\n};\r\nemMap.prototype.coordinateOffFn = function () {\r\n  $(\"#coordinate\").remove();\r\n  this.map.removeOverlay(this.coordinate_overlay);\r\n  // ol.Observable.unByKey(_lisen);\r\n  this.map.un('singleclick', this.coordinateLisen);\r\n};\r\n\r\n\r\n//测量\r\nemMap.prototype.pointerMoveHandler = function (evt) {\r\n  let _helpTooltipElement = null;\r\n  let _helpTooltip = null;\r\n  let _continuePolygonMsg = null;\r\n  let _continueLineMsg = null;\r\n\r\n\r\n  let _map = null;\r\n  let _mapNmame = store.getters[\"scene/type\"];\r\n  if (window[_mapNmame]) {\r\n    _map = window[_mapNmame];\r\n  } else {\r\n    return\r\n  }\r\n\r\n\r\n  if (_map) {\r\n    _helpTooltipElement = _map.helpTooltipElement;\r\n    _helpTooltip = _map.helpTooltip;\r\n    _continuePolygonMsg = _map.continuePolygonMsg;\r\n    _continueLineMsg = _map.continueLineMsg;\r\n\r\n  } else {\r\n    return\r\n  }\r\n\r\n  if (evt.dragging) {\r\n    return;\r\n  }\r\n  var helpMsg = '点击测量';\r\n\r\n  if (this.sketch) {\r\n    var geom = (this.sketch.getGeometry());\r\n    if (geom instanceof ol.geom.Polygon) {\r\n      helpMsg = _continuePolygonMsg;\r\n    } else if (geom instanceof ol.geom.LineString) {\r\n      helpMsg = _continueLineMsg;\r\n    }\r\n  }\r\n\r\n  _helpTooltipElement.innerHTML = helpMsg;\r\n  _helpTooltip.setPosition(evt.coordinate);\r\n\r\n  _helpTooltipElement.classList.remove('hidden');\r\n};\r\nemMap.prototype.formatLength = function (line) {\r\n  let length = ol.sphere.getLength(line, {\r\n    projection: 'EPSG:4326'\r\n  });\r\n  let output;\r\n  if (length > 100) {\r\n    output = (Math.round(length / 1000 * 100) / 100) +\r\n      ' ' + 'km';\r\n  } else {\r\n    output = (Math.round(length * 100) / 100) +\r\n      ' ' + 'm';\r\n  }\r\n  return output;\r\n};\r\nemMap.prototype.formatArea = function (polygon) {\r\n  let area = ol.sphere.getArea(polygon, {\r\n    projection: 'EPSG:4326'\r\n  });\r\n  let output;\r\n  if (area > 10000) {\r\n    output = (Math.round(area / 1000000 * 100) / 100) +\r\n      ' ' + 'km<sup>2</sup>';\r\n  } else {\r\n    output = (Math.round(area * 100) / 100) +\r\n      ' ' + 'm<sup>2</sup>';\r\n  }\r\n  return output;\r\n};\r\nemMap.prototype.addInteraction = function (_type) {\r\n  let _this = this;\r\n\r\n  let type = (_type == 'area' ? 'Polygon' : 'LineString');\r\n  _this.measure_draw = new ol.interaction.Draw({\r\n    source: _this.measureSource,\r\n    type: type,\r\n    style: new ol.style.Style({\r\n      fill: new ol.style.Fill({\r\n        color: 'rgba(255, 255, 255, 0.4)'\r\n      }),\r\n      stroke: new ol.style.Stroke({\r\n        color: 'rgba(0, 0, 0, 0.5)',\r\n        lineDash: [10, 10],\r\n        width: 2\r\n      }),\r\n      image: new ol.style.Circle({\r\n        radius: 6,\r\n        stroke: new ol.style.Stroke({\r\n          color: 'rgba(0, 0, 0, 0.7)'\r\n        }),\r\n        fill: new ol.style.Fill({\r\n          color: 'rgba(255, 255, 255, 0.8)'\r\n        })\r\n      })\r\n    })\r\n  });\r\n  this.map.addInteraction(_this.measure_draw);\r\n\r\n  this.createMeasureTooltip();\r\n  this.createHelpTooltip();\r\n\r\n  let listener;\r\n  _this.measure_draw.on('drawstart', function (evt) {\r\n    // set sketch\r\n    _this.sketch = evt.feature;\r\n\r\n    var tooltipCoord = evt.coordinate;\r\n\r\n    listener = _this.sketch.getGeometry().on('change', function (evt) {\r\n      var geom = evt.target;\r\n      var output;\r\n      if (geom instanceof ol.geom.Polygon) {\r\n        output = _this.formatArea(geom);\r\n        tooltipCoord = geom.getInteriorPoint().getCoordinates();\r\n      } else if (geom instanceof ol.geom.LineString) {\r\n        output = _this.formatLength(geom);\r\n        tooltipCoord = geom.getLastCoordinate();\r\n      }\r\n      _this.measureTooltipElement.innerHTML = output;\r\n      _this.measureTooltip.setPosition(tooltipCoord);\r\n    });\r\n  }, this);\r\n\r\n  _this.measure_draw.on('drawend', function () {\r\n    _this.measureTooltipElement.className = 'emMeasure-tooltip emMeasure-tooltip-static';\r\n    _this.measureTooltip.setOffset([0, -7]);\r\n    // unset sketch\r\n    _this.sketch = null;\r\n    // unset tooltip so that a new one can be created\r\n    _this.measureTooltipElement = null;\r\n    _this.createMeasureTooltip();\r\n    ol.Observable.unByKey(listener);\r\n  }, this);\r\n};\r\nemMap.prototype.createHelpTooltip = function () {\r\n  let _this = this;\r\n  if (this.helpTooltipElement) {\r\n    this.helpTooltipElement.parentNode.removeChild(this.helpTooltipElement);\r\n  }\r\n  this.helpTooltipElement = document.createElement('div');\r\n  this.helpTooltipElement.className = 'emMeasure-tooltip hidden';\r\n  this.helpTooltip = new ol.Overlay({\r\n    element: _this.helpTooltipElement,\r\n    offset: [15, 0],\r\n    positioning: 'center-left'\r\n  });\r\n  this.helpTooltip_Overlays.push(this.helpTooltip);\r\n  this.map.addOverlay(this.helpTooltip);\r\n};\r\nemMap.prototype.createMeasureTooltip = function () {\r\n  let _this = this;\r\n  if (this.measureTooltipElement) {\r\n    this.measureTooltipElement.parentNode.removeChild(this.measureTooltipElement);\r\n  }\r\n  this.measureTooltipElement = document.createElement('div');\r\n  this.measureTooltipElement.className = 'emMeasure-tooltip emMeasure-tooltip-measure';\r\n  this.measureTooltip = new ol.Overlay({\r\n    element: _this.measureTooltipElement,\r\n    offset: [0, -15],\r\n    positioning: 'bottom-center'\r\n  });\r\n  this.measureTooltip_Overlays.push(this.measureTooltip);\r\n  this.map.addOverlay(this.measureTooltip);\r\n};\r\nemMap.prototype.measureOn = function (_type) {\r\n  this.map.on('pointermove', this.pointerMoveHandler);\r\n  this.map.removeInteraction(this.measure_draw);\r\n  this.addInteraction(_type);\r\n};\r\nemMap.prototype.measureOff = function () {\r\n  let _this = this;\r\n  this.helpTooltip_Overlays.forEach(function (_obj) {\r\n    _this.map.removeOverlay(_obj);\r\n  });\r\n  this.helpTooltip_Overlays = [];\r\n  this.map.un('pointermove', this.pointerMoveHandler);\r\n  this.map.removeInteraction(this.measure_draw);\r\n};\r\nemMap.prototype.measureClear = function () {\r\n  let _this = this;\r\n  this.measureTooltip_Overlays.forEach(function (_obj) {\r\n    _this.map.removeOverlay(_obj);\r\n  });\r\n  this.measureTooltip_Overlays = [];\r\n  this.measureSource.clear();\r\n};\r\n\r\n// 添加火警标注\r\nemMap.prototype.addFireFn = function (_icon, _data) {//添加覆盖物\r\n  /* [{\r\n        id:\"\",\r\n        lng:\"\",\r\n        lat\"\"\r\n   }]*/\r\n  let _this = this;\r\n  for (let i = 0; i < _data.length; i++) {\r\n    $(\"body\").append(`<img id=\"fire_${_data[i].id}\" src=\"images/fire2d.gif\" style=\"width:48px;height:58px;\"/>`);\r\n    let _el = document.getElementById(\"fire_\" + _data[i].id);\r\n    let _popup = new ol.Overlay({\r\n      id: \"fire_\" + _data[i].id,\r\n      position: [_data[i].lng, _data[i].lat],\r\n      offset: [-10, -32],\r\n      element: _el,\r\n      className: \"fire-overlay\"\r\n    });\r\n    _popup.set(\"overlayData\", _data[i]);\r\n    /* _popup.on(\"change:overlayData\", function (e) {\r\n         console.log(123);\r\n         console.log(e.target);\r\n         console.log(e.type);\r\n     });*/\r\n    this.fireOverlays.push(_popup);\r\n    this.map.addOverlay(_popup);\r\n    $(_popup.getElement()).on('click', function () {\r\n      let _data = _popup.get(\"overlayData\");\r\n      _this.fireObj = _data;\r\n      // console.log(_data);\r\n      _this.infoFn({\r\n        type: \"fire\",\r\n        content: _data,\r\n        lng: _data.googleLang,\r\n        lat: _data.googleLat\r\n      });\r\n    }).on(\"mouseover\", function () {\r\n      $(this).css(\"cursor\", 'pointer');\r\n    });\r\n  }\r\n};\r\nemMap.prototype.clearOverlayFn = function (_overlay) {//删除覆盖物\r\n  if (_overlay && _overlay.length > 0) {\r\n    for (let i = 0; i < _overlay.length; i++) {\r\n      this.map.removeOverlay(_overlay[i]);\r\n    }\r\n    this.fireOverlays = [];\r\n  }\r\n};\r\nemMap.prototype.clearXfsExptionOverlayFn = function () {//删除覆盖物\r\n  let _overlays = this.xfsExptionOverlays;\r\n  if (_overlays && _overlays.length > 0) {\r\n    for (let i = 0; i < _overlays.length; i++) {\r\n      this.map.removeOverlay(_overlays[i]);\r\n    }\r\n    this.xfsExptionOverlays = [];\r\n  }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/ol/fn.js","//data\r\nimport {db} from \"./data/db\"\r\nimport {baseMapFN} from \"./baseMap\"\r\nimport {emMap, clustersFn, clustersLayerFn, layerFN} from \"./fn\"\r\n\r\nfunction openScene(_name) {\r\n\r\n  if (!(window[_name])) {\r\n    window[_name] = new emMap(_name);\r\n  }\r\n  return {\r\n    mapName: _name\r\n  }\r\n\r\n}\r\n\r\nexport default {\r\n  db,\r\n  openScene,\r\n  baseMapFN,\r\n  layerFN,\r\n  clustersFn,\r\n  clustersLayerFn\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/ol/index.js","export function baseMapFN() {\r\n  var forEachPoint = function (func) {\r\n    return function (input, opt_output, opt_dimension) {\r\n      var len = input.length;\r\n      var dimension = opt_dimension ? opt_dimension : 2;\r\n      var output;\r\n      if (opt_output) {\r\n        output = opt_output;\r\n      } else {\r\n        if (dimension !== 2) {\r\n          output = input.slice();\r\n        } else {\r\n          output = new Array(len);\r\n        }\r\n      }\r\n      for (var offset = 0; offset < len; offset += dimension) {\r\n        func(input, output, offset)\r\n      }\r\n      return output;\r\n    };\r\n  };\r\n\r\n  var sphericalMercator = {}\r\n\r\n  var RADIUS = 6378137;\r\n  var MAX_LATITUDE = 85.0511287798;\r\n  var RAD_PER_DEG = Math.PI / 180;\r\n\r\n  sphericalMercator.forward = forEachPoint(function (input, output, offset) {\r\n    var lat = Math.max(Math.min(MAX_LATITUDE, input[offset + 1]), -MAX_LATITUDE);\r\n    var sin = Math.sin(lat * RAD_PER_DEG);\r\n\r\n    output[offset] = RADIUS * input[offset] * RAD_PER_DEG;\r\n    output[offset + 1] = RADIUS * Math.log((1 + sin) / (1 - sin)) / 2;\r\n  });\r\n\r\n  sphericalMercator.inverse = forEachPoint(function (input, output, offset) {\r\n    output[offset] = input[offset] / RADIUS / RAD_PER_DEG;\r\n    output[offset + 1] = (2 * Math.atan(Math.exp(input[offset + 1] / RADIUS)) - (Math.PI / 2)) / RAD_PER_DEG;\r\n  });\r\n\r\n\r\n  var baiduMercator = {}\r\n\r\n  var MCBAND = [12890594.86, 8362377.87,\r\n    5591021, 3481989.83, 1678043.12, 0];\r\n\r\n  var LLBAND = [75, 60, 45, 30, 15, 0];\r\n\r\n  var MC2LL = [\r\n    [1.410526172116255e-8, 0.00000898305509648872, -1.9939833816331,\r\n      200.9824383106796, -187.2403703815547, 91.6087516669843,\r\n      -23.38765649603339, 2.57121317296198, -0.03801003308653,\r\n      17337981.2],\r\n    [-7.435856389565537e-9, 0.000008983055097726239,\r\n      -0.78625201886289, 96.32687599759846, -1.85204757529826,\r\n      -59.36935905485877, 47.40033549296737, -16.50741931063887,\r\n      2.28786674699375, 10260144.86],\r\n    [-3.030883460898826e-8, 0.00000898305509983578, 0.30071316287616,\r\n      59.74293618442277, 7.357984074871, -25.38371002664745,\r\n      13.45380521110908, -3.29883767235584, 0.32710905363475,\r\n      6856817.37],\r\n    [-1.981981304930552e-8, 0.000008983055099779535, 0.03278182852591,\r\n      40.31678527705744, 0.65659298677277, -4.44255534477492,\r\n      0.85341911805263, 0.12923347998204, -0.04625736007561,\r\n      4482777.06],\r\n    [3.09191371068437e-9, 0.000008983055096812155, 0.00006995724062,\r\n      23.10934304144901, -0.00023663490511, -0.6321817810242,\r\n      -0.00663494467273, 0.03430082397953, -0.00466043876332,\r\n      2555164.4],\r\n    [2.890871144776878e-9, 0.000008983055095805407, -3.068298e-8,\r\n      7.47137025468032, -0.00000353937994, -0.02145144861037,\r\n      -0.00001234426596, 0.00010322952773, -0.00000323890364,\r\n      826088.5]];\r\n\r\n  var LL2MC = [\r\n    [-0.0015702102444, 111320.7020616939, 1704480524535203,\r\n      -10338987376042340, 26112667856603880,\r\n      -35149669176653700, 26595700718403920,\r\n      -10725012454188240, 1800819912950474, 82.5],\r\n    [0.0008277824516172526, 111320.7020463578, 647795574.6671607,\r\n      -4082003173.641316, 10774905663.51142, -15171875531.51559,\r\n      12053065338.62167, -5124939663.577472, 913311935.9512032,\r\n      67.5],\r\n    [0.00337398766765, 111320.7020202162, 4481351.045890365,\r\n      -23393751.19931662, 79682215.47186455, -115964993.2797253,\r\n      97236711.15602145, -43661946.33752821, 8477230.501135234,\r\n      52.5],\r\n    [0.00220636496208, 111320.7020209128, 51751.86112841131,\r\n      3796837.749470245, 992013.7397791013, -1221952.21711287,\r\n      1340652.697009075, -620943.6990984312, 144416.9293806241,\r\n      37.5],\r\n    [-0.0003441963504368392, 111320.7020576856, 278.2353980772752,\r\n      2485758.690035394, 6070.750963243378, 54821.18345352118,\r\n      9540.606633304236, -2710.55326746645, 1405.483844121726,\r\n      22.5],\r\n    [-0.0003218135878613132, 111320.7020701615, 0.00369383431289,\r\n      823725.6402795718, 0.46104986909093, 2351.343141331292,\r\n      1.58060784298199, 8.77738589078284, 0.37238884252424, 7.45]];\r\n\r\n\r\n  function getRange(v, min, max) {\r\n    v = Math.max(v, min);\r\n    v = Math.min(v, max);\r\n\r\n    return v;\r\n  }\r\n\r\n  function getLoop(v, min, max) {\r\n    var d = max - min;\r\n    while (v > max) {\r\n      v -= d;\r\n    }\r\n    while (v < min) {\r\n      v += d;\r\n    }\r\n\r\n    return v;\r\n  }\r\n\r\n  function convertor(input, output, offset, table) {\r\n    var px = input[offset];\r\n    var py = input[offset + 1];\r\n    var x = table[0] + table[1] * Math.abs(px);\r\n    var d = Math.abs(py) / table[9];\r\n    var y = table[2]\r\n      + table[3]\r\n      * d\r\n      + table[4]\r\n      * d\r\n      * d\r\n      + table[5]\r\n      * d\r\n      * d\r\n      * d\r\n      + table[6]\r\n      * d\r\n      * d\r\n      * d\r\n      * d\r\n      + table[7]\r\n      * d\r\n      * d\r\n      * d\r\n      * d\r\n      * d\r\n      + table[8]\r\n      * d\r\n      * d\r\n      * d\r\n      * d\r\n      * d\r\n      * d;\r\n\r\n    output[offset] = x * (px < 0 ? -1 : 1);\r\n    output[offset + 1] = y * (py < 0 ? -1 : 1);\r\n  }\r\n\r\n  baiduMercator.forward = forEachPoint(function (input, output, offset) {\r\n    var lng = getLoop(input[offset], -180, 180);\r\n    var lat = getRange(input[offset + 1], -74, 74);\r\n\r\n    var table = null;\r\n    var j;\r\n    for (j = 0; j < LLBAND.length; ++j) {\r\n      if (lat >= LLBAND[j]) {\r\n        table = LL2MC[j];\r\n        break;\r\n      }\r\n    }\r\n    if (table === null) {\r\n      for (j = LLBAND.length - 1; j >= 0; --j) {\r\n        if (lat <= -LLBAND[j]) {\r\n          table = LL2MC[j];\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    output[offset] = lng;\r\n    output[offset + 1] = lat;\r\n    convertor(output, output, offset, table);\r\n  });\r\n\r\n  baiduMercator.inverse = forEachPoint(function (input, output, offset) {\r\n    var y_abs = Math.abs(input[offset + 1]);\r\n\r\n    var table = null;\r\n    for (var j = 0; j < MCBAND.length; j++) {\r\n      if (y_abs >= MCBAND[j]) {\r\n        table = MC2LL[j];\r\n        break;\r\n      }\r\n    }\r\n\r\n    convertor(input, output, offset, table);\r\n  });\r\n\r\n  var gcj02 = {}\r\n\r\n  var PI = Math.PI;\r\n  var AXIS = 6378245.0;\r\n  var OFFSET = 0.00669342162296594323;  // (a^2 - b^2) / a^2\r\n\r\n  function delta(wgLon, wgLat) {\r\n    var dLat = transformLat(wgLon - 105.0, wgLat - 35.0);\r\n    var dLon = transformLon(wgLon - 105.0, wgLat - 35.0);\r\n    var radLat = wgLat / 180.0 * PI;\r\n    var magic = Math.sin(radLat);\r\n    magic = 1 - OFFSET * magic * magic;\r\n    var sqrtMagic = Math.sqrt(magic);\r\n    dLat = (dLat * 180.0) / ((AXIS * (1 - OFFSET)) / (magic * sqrtMagic) * PI);\r\n    dLon = (dLon * 180.0) / (AXIS / sqrtMagic * Math.cos(radLat) * PI);\r\n    return [dLon, dLat];\r\n  }\r\n\r\n  function outOfChina(lon, lat) {\r\n    if (lon < 72.004 || lon > 137.8347) {\r\n      return true;\r\n    }\r\n    if (lat < 0.8293 || lat > 55.8271) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  function transformLat(x, y) {\r\n    var ret = -100.0 + 2.0 * x + 3.0 * y + 0.2 * y * y + 0.1 * x * y + 0.2 * Math.sqrt(Math.abs(x));\r\n    ret += (20.0 * Math.sin(6.0 * x * PI) + 20.0 * Math.sin(2.0 * x * PI)) * 2.0 / 3.0;\r\n    ret += (20.0 * Math.sin(y * PI) + 40.0 * Math.sin(y / 3.0 * PI)) * 2.0 / 3.0;\r\n    ret += (160.0 * Math.sin(y / 12.0 * PI) + 320 * Math.sin(y * PI / 30.0)) * 2.0 / 3.0;\r\n    return ret;\r\n  }\r\n\r\n  function transformLon(x, y) {\r\n    var ret = 300.0 + x + 2.0 * y + 0.1 * x * x + 0.1 * x * y + 0.1 * Math.sqrt(Math.abs(x));\r\n    ret += (20.0 * Math.sin(6.0 * x * PI) + 20.0 * Math.sin(2.0 * x * PI)) * 2.0 / 3.0;\r\n    ret += (20.0 * Math.sin(x * PI) + 40.0 * Math.sin(x / 3.0 * PI)) * 2.0 / 3.0;\r\n    ret += (150.0 * Math.sin(x / 12.0 * PI) + 300.0 * Math.sin(x / 30.0 * PI)) * 2.0 / 3.0;\r\n    return ret;\r\n  }\r\n\r\n  gcj02.toWGS84 = forEachPoint(function (input, output, offset) {\r\n    var lng = input[offset];\r\n    var lat = input[offset + 1];\r\n    if (!outOfChina(lng, lat)) {\r\n      var deltaD = delta(lng, lat);\r\n      lng = lng - deltaD[0];\r\n      lat = lat - deltaD[1];\r\n    }\r\n    output[offset] = lng;\r\n    output[offset + 1] = lat;\r\n  });\r\n\r\n  gcj02.fromWGS84 = forEachPoint(function (input, output, offset) {\r\n    var lng = input[offset];\r\n    var lat = input[offset + 1];\r\n    if (!outOfChina(lng, lat)) {\r\n      var deltaD = delta(lng, lat);\r\n      lng = lng + deltaD[0];\r\n      lat = lat + deltaD[1];\r\n    }\r\n    output[offset] = lng;\r\n    output[offset + 1] = lat;\r\n  });\r\n\r\n  var bd09 = {}\r\n\r\n  var PI = Math.PI;\r\n  var X_PI = PI * 3000 / 180;\r\n\r\n  function toGCJ02(input, output, offset) {\r\n    var x = input[offset] - 0.0065;\r\n    var y = input[offset + 1] - 0.006;\r\n    var z = Math.sqrt(x * x + y * y) - 0.00002 * Math.sin(y * X_PI);\r\n    var theta = Math.atan2(y, x) - 0.000003 * Math.cos(x * X_PI);\r\n    output[offset] = z * Math.cos(theta);\r\n    output[offset + 1] = z * Math.sin(theta);\r\n    return output;\r\n  }\r\n\r\n  function fromGCJ02(input, output, offset) {\r\n    var x = input[offset];\r\n    var y = input[offset + 1];\r\n    var z = Math.sqrt(x * x + y * y) + 0.00002 * Math.sin(y * X_PI);\r\n    var theta = Math.atan2(y, x) + 0.000003 * Math.cos(x * X_PI);\r\n    output[offset] = z * Math.cos(theta) + 0.0065;\r\n    output[offset + 1] = z * Math.sin(theta) + 0.006;\r\n    return output;\r\n  }\r\n\r\n  bd09.toWGS84 = function (input, opt_output, opt_dimension) {\r\n    var output = forEachPoint(toGCJ02)(input, opt_output, opt_dimension);\r\n    return gcj02.toWGS84(output, output, opt_dimension);\r\n  };\r\n\r\n  bd09.fromWGS84 = function (input, opt_output, opt_dimension) {\r\n    var output = gcj02.fromWGS84(input, opt_output, opt_dimension);\r\n    return forEachPoint(fromGCJ02)(output, output, opt_dimension);\r\n  };\r\n\r\n\r\n  var projzh = {}\r\n\r\n  projzh.smerc2bmerc = function (input, opt_output, opt_dimension) {\r\n    var output = sphericalMercator.inverse(input, opt_output, opt_dimension);\r\n    output = bd09.fromWGS84(output, output, opt_dimension);\r\n    return baiduMercator.forward(output, output, opt_dimension);\r\n  };\r\n\r\n  projzh.bmerc2smerc = function (input, opt_output, opt_dimension) {\r\n    var output = baiduMercator.inverse(input, opt_output, opt_dimension);\r\n    output = bd09.toWGS84(output, output, opt_dimension);\r\n    return sphericalMercator.forward(output, output, opt_dimension);\r\n  };\r\n\r\n  projzh.bmerc2ll = function (input, opt_output, opt_dimension) {\r\n    var output = baiduMercator.inverse(input, opt_output, opt_dimension);\r\n    return bd09.toWGS84(output, output, opt_dimension);\r\n  };\r\n\r\n  projzh.ll2bmerc = function (input, opt_output, opt_dimension) {\r\n    var output = bd09.fromWGS84(input, opt_output, opt_dimension);\r\n    return baiduMercator.forward(output, output, opt_dimension);\r\n  };\r\n\r\n  projzh.ll2smerc = sphericalMercator.forward;\r\n  projzh.smerc2ll = sphericalMercator.inverse;\r\n\r\n\r\n  var extent = [72.004, 0.8293, 137.8347, 55.8271];\r\n\r\n  var baiduMercatorProj = new ol.proj.Projection({\r\n    code: 'baidu',\r\n    extent: ol.extent.applyTransform(extent, projzh.ll2bmerc),\r\n    units: 'm'\r\n  });\r\n\r\n  ol.proj.addProjection(baiduMercatorProj);\r\n  ol.proj.addCoordinateTransforms('EPSG:4326', baiduMercatorProj, projzh.ll2bmerc, projzh.bmerc2ll);\r\n  ol.proj.addCoordinateTransforms('EPSG:3857', baiduMercatorProj, projzh.smerc2bmerc, projzh.bmerc2smerc);\r\n\r\n  var bmercResolutions = new Array(19);\r\n  for (var i = 0; i < 19; ++i) {\r\n    bmercResolutions[i] = Math.pow(2, 18 - i);\r\n  }\r\n\r\n  var baidu_vec = new ol.layer.Tile({\r\n    name: \"baseMap_layer\",\r\n    source: new ol.source.XYZ({\r\n      projection: 'baidu',\r\n      maxZoom: 18,\r\n      tileUrlFunction: function (tileCoord) {\r\n        var x = tileCoord[1];\r\n        var y = tileCoord[2];\r\n        var z = tileCoord[0];\r\n        return \"http://online4.map.bdimg.com/tile/?qt=vtile&x=\" + x + \"&y=\" + y + \"&z=\" + z + \"&styles=pl&scaler=1&udt=20190521\";\r\n      },\r\n      tileGrid: new ol.tilegrid.TileGrid({\r\n        resolutions: bmercResolutions,\r\n        origin: [0, 0],\r\n        extent: ol.extent.applyTransform(extent, projzh.ll2bmerc),\r\n        tileSize: [256, 256]\r\n      })\r\n    })\r\n  });\r\n\r\n  var baidu_img = new ol.layer.Tile({\r\n    name: \"baseMap_layer\",\r\n    opacity: 1.0,\r\n    source: new ol.source.XYZ({\r\n      projection: 'baidu',\r\n      maxZoom: 18,\r\n      tileUrlFunction: function (tileCoord) {\r\n        var x = tileCoord[1];\r\n        var y = tileCoord[2];\r\n        var z = tileCoord[0];\r\n\r\n        // return \"http://online4.map.bdimg.com/tile/?qt=vtile&x=\"+x+\"&y=\"+y+\"&z=\"+z+\"&styles=pl&scaler=1&udt=20190521\";\r\n        return \"http://shangetu2.map.bdimg.com/it/u=x=\" + x + \";y=\" + y + \";z=\" + z + \";v=009;type=sate&fm=46&udt=20190521\";\r\n      },\r\n      tileGrid: new ol.tilegrid.TileGrid({\r\n        resolutions: bmercResolutions,\r\n        origin: [0, 0],\r\n        extent: ol.extent.applyTransform(extent, projzh.ll2bmerc),\r\n        tileSize: [256, 256]\r\n      })\r\n    })\r\n  });\r\n\r\n  var baidu_cva = new ol.layer.Tile({\r\n    name: \"baseMap_layer\",\r\n    source: new ol.source.XYZ({\r\n      projection: 'baidu',\r\n      maxZoom: 18,\r\n      tileUrlFunction: function (tileCoord) {\r\n        var x = tileCoord[1];\r\n        var y = tileCoord[2];\r\n        var z = tileCoord[0];\r\n\r\n        return \"http://online4.map.bdimg.com/tile/?qt=vtile&x=\" + x + \"&y=\" + y + \"&z=\" + z + \"&styles=sl&scaler=1&udt=20190521\";\r\n      },\r\n      tileGrid: new ol.tilegrid.TileGrid({\r\n        resolutions: bmercResolutions,\r\n        origin: [0, 0],\r\n        extent: ol.extent.applyTransform(extent, projzh.ll2bmerc),\r\n        tileSize: [256, 256]\r\n      })\r\n    })\r\n  });\r\n\r\n\r\n//创建天地图图层(WMTS方式)\r\n  function crtLayerWMTS(type, proj, opacity, tk) {\r\n    var projection = ol.proj.get(proj);\r\n    var projectionExtent = projection.getExtent();\r\n    var size = ol.extent.getWidth(projectionExtent) / 256;\r\n    var resolutions = new Array(19);\r\n    var matrixIds = new Array(19);\r\n    for (var z = 1; z < 19; ++z) {\r\n      // generate resolutions and matrixIds arrays for this WMTS\r\n      resolutions[z] = size / Math.pow(2, z);\r\n      matrixIds[z] = z;\r\n    }\r\n\r\n    var layer = new ol.layer.Tile({\r\n      name: \"baseMap_layer\",\r\n      opacity: opacity,\r\n      source: new ol.source.WMTS({\r\n        attributions: '<a href=\"http://www.tianditu.com/service/info.html?sid=5292&type=info\">天地图</a>',\r\n        url: 'http://t0.tianditu.gov.cn/' + type + '/wmts?tk=' + tk,\r\n        layer: type.substr(0, 3),\r\n        matrixSet: type.substring(4),\r\n        format: 'tiles',\r\n        projection: projection,\r\n        tileGrid: new ol.tilegrid.WMTS({\r\n          origin: ol.extent.getTopLeft(projectionExtent),\r\n          resolutions: resolutions,\r\n          matrixIds: matrixIds\r\n        }),\r\n        style: 'default',\r\n        wrapX: true\r\n      })\r\n    });\r\n    layer.id = type;\r\n    return layer;\r\n  }\r\n\r\n// 天地图(vec_c:矢量底图经纬度投影,img_c:影像底图经纬度投影)\r\n  var tLayer_vec = crtLayerWMTS(\"vec_c\", \"EPSG:4326\", 1.0, \"dcfb31be4b1daef33e484e48348cb28b\");\r\n// 天地图(vec_c:矢量底图经纬度投影,img_c:影像底图经纬度投影)\r\n  var tLayer_img = crtLayerWMTS(\"img_c\", \"EPSG:4326\", 1.0, \"dcfb31be4b1daef33e484e48348cb28b\");\r\n\r\n\r\n// 本地地图\r\n  var osmLayer_vec = new ol.layer.Tile({\r\n    name: \"baseMap_layer\",\r\n    opacity: 1.0,\r\n    source: new ol.source.XYZ({\r\n      url: 'http://192.168.20.125:800/sceneData/zhlh_vec/{z}/{x}/{y}.png',\r\n      wrapX: false\r\n    }),\r\n    projection: 'EPSG:4326'\r\n  });\r\n  var osmLayer_img = new ol.layer.Tile({\r\n    name: \"baseMap_layer\",\r\n    opacity: 1.0,\r\n    source: new ol.source.XYZ({\r\n      url: 'http://192.168.20.125:800/sceneData/zhlh_img/{z}/{x}/{y}.png',\r\n      wrapX: false\r\n    }),\r\n    projection: 'EPSG:4326'\r\n  });\r\n\r\n\r\n  return {\r\n    baidu_vec,//百度矢量底图\r\n    baidu_img,//百度影像底图\r\n    baidu_cva,//百度标注底图\r\n    osmLayer_vec,//离线矢量底图\r\n    osmLayer_img,//离线影像底图\r\n    tLayer_vec,//天地图矢量底图\r\n    tLayer_img//天地图影像地图\r\n  };\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/ol/baseMap.js","<template>\r\n  <div class=\"map\">\r\n    <div :id=\"id\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {loadJs, loadCss} from \"@/utils/tools\";\r\n  import mp from \"@/utils/ol/index\";\r\n  import {queryVicinityPrint, findOne, queryAllcount} from \"@/api/tree\";\r\n  import {marker} from \"@/api/marker\";\r\n  import {geom} from \"@/api/geom\";\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        id: \"map\"\r\n      };\r\n    },\r\n    props: {},\r\n    methods: {\r\n      init() {\r\n\r\n\r\n        let _this = this;\r\n        // 初始化场景\r\n        // cm.init(this.id, \"https://onelz.oicp.vip/SG/b3dm/LH1-1-2.405276/tileset.json\");\r\n        let _element = document.getElementById('ol_js');\r\n        if (_element) {\r\n          _this.mapInit();\r\n        } else {\r\n          //动态加载依赖库\r\n          let _url = process.env.STATIC_URL;\r\n          console.log('css',_url);\r\n          loadCss(\"ol_css\", _url + \"/sceneStatic/ol/ol.css\", function () {\r\n            console.log('css');\r\n          });\r\n          loadJs(\"ol_js\", _url + \"/sceneStatic/ol/ol.js\", function () {\r\n            console.log('js');\r\n            _this.mapInit();\r\n          });\r\n        }\r\n      },\r\n      mapInit() {\r\n        window[this.id].init([114.031047, 22.663679], [\r\n          mp.baseMapFN().baidu_vec\r\n        ]);\r\n      },\r\n      spaceTimeBaseMap(obj) {\r\n\r\n        let _url = \"\";\r\n\r\n        if (obj.url) {\r\n          _url = obj.url;\r\n        }\r\n\r\n        let _resolutions = window[this.id].resolutions;\r\n        var _origin = [-400, 400];\r\n\r\n        this.toScene({\r\n          zIndex: 4\r\n        });\r\n\r\n        let _layer = new ol.layer.Tile({//正视投影\r\n          name: \"baseMap_layer\",\r\n          source: new ol.source.ESRICache({\r\n            origin: _origin,\r\n            resolutions: _resolutions,\r\n            projection: 'EPSG:4326',\r\n            url: _url\r\n          })\r\n        });\r\n        return _layer;\r\n      },\r\n      spaceTimeData(obj) {\r\n\r\n        let _url = obj.data_url;\r\n        let _type = obj.layer_name;\r\n        let _iconUrl = obj.data_maker_iconUrl;\r\n        let _titleKey = obj.maker_titleKey;\r\n        let _clustersColor = obj.clusters_color;\r\n\r\n        window[this.id].viewFn(0, [114.05566529913777, 22.604387298808085]);\r\n        let _layer = mp.clustersLayerFn(_url,\r\n          {\r\n            type: _type,\r\n            titleKey: _titleKey,\r\n            iconUrl: _iconUrl\r\n          }, _clustersColor, 48);\r\n\r\n        this.addLayer({\r\n          layer: _layer.layer\r\n        });\r\n      },\r\n      baseMapFn(obj) {\r\n        let _layer = null;\r\n        console.log(obj);\r\n        this.removeLayer({\r\n          layer_name: \"baseMap\"//删除当前低图\r\n        });\r\n\r\n        switch (obj.layerName) {\r\n          case \"1\"://天地图矢量图\r\n            _layer = mp.baseMapFN().tLayer_vec;\r\n            break;\r\n          case \"2\"://天地图影像图\r\n            _layer = mp.baseMapFN().tLayer_img;\r\n            break;\r\n          case \"3\"://百度矢量图\r\n            _layer = mp.baseMapFN().baidu_vec;\r\n            break;\r\n          case \"4\"://百度影像图\r\n            _layer = mp.baseMapFN().baidu_img;\r\n            break;\r\n          case \"5\"://时空云矢量图\r\n            _layer = this.spaceTimeBaseMap({\r\n              url: \"http://onelz.oicp.vip/proxy/layer/C8DDAE2452CE48F4ACBE0D60C455A234/01D4E45CB4A84DE7B5DF3D859529D918/tile/{z}/{y}/{x}\"\r\n            });\r\n            break;\r\n          case \"6\"://时空云影像图\r\n            _layer = this.spaceTimeBaseMap({\r\n              url: \"http://onelz.oicp.vip/proxy/layer/E36DF1E5DD7D4081A1E722ED2C8D7455/999C1448C6DD4842A35412B42226F0A3/tile/{z}/{y}/{x}\"\r\n            });\r\n            break;\r\n          case \"7\"://本地矢量图\r\n            _layer = mp.baseMapFN().osmLayer_vec;\r\n            break;\r\n          case \"8\"://本地影像图\r\n            _layer = mp.baseMapFN().osmLayer_img;\r\n            break;\r\n        }\r\n\r\n        this.addLayer({\r\n          layer: _layer,\r\n          zIndex: -1\r\n        });\r\n      },\r\n      xyz(obj) {//坐标\r\n        console.log(obj);\r\n        if (obj.trigger) {\r\n          window[this.id].coordinateOnFn();\r\n        } else {\r\n          window[this.id].coordinateOffFn();\r\n        }\r\n      },\r\n      measure_drawPloy(obj) {\r\n        window[this.id].measureOn(\"area\");\r\n      },\r\n      measure_drawLine(obj) {\r\n        window[this.id].measureOn(\"distance\");\r\n      },\r\n      measure_clear(obj) {\r\n        window[this.id].measureClear();\r\n        window[this.id].measureOff();\r\n      },\r\n      toScene(obj) {\r\n        let _zIndex = obj.zIndex ? obj.zIndex : 0;\r\n        let _lng = obj.lng ? obj.lng : 114.031047;\r\n        let _lat = obj.lat ? obj.lat : 22.663679;\r\n\r\n        window[this.id].viewFn(_zIndex, [_lng, _lat]);\r\n      },\r\n      addLayer(obj) {\r\n        let _layer = obj.layer;\r\n        if (obj.zIndex) {\r\n          _layer.setZIndex(obj.zIndex);\r\n        }\r\n        window[this.id].map.addLayer(_layer);\r\n      },\r\n      removeLayer(obj) {\r\n\r\n        let _map = window[this.id].map;\r\n        let _layers = _map.getLayers().getArray();\r\n\r\n        _layers.forEach(function (_layer) {\r\n          console.log(_layer.get(\"name\"));\r\n          let _name = obj.layer_name + \"_layer\";\r\n          if (_layer.get(\"name\") === _name) {\r\n            _map.removeLayer(_layer);\r\n          }\r\n        });\r\n      },\r\n      scene_data(obj) {\r\n\r\n        console.log(obj);\r\n        switch (obj.data_type) {\r\n          case \"1\"://采集的树数据\r\n            if (obj.trigger) {\r\n              this.queryVicinityPrintFn(obj);\r\n            } else {\r\n              this.removeLayer({\r\n                layer_name: obj.layer_name\r\n              });\r\n            }\r\n            break;\r\n          case \"2\"://时空云数据\r\n            if (obj.trigger) {\r\n              this.spaceTimeData(obj);\r\n            } else {\r\n              this.removeLayer({\r\n                layer_name: obj.layer_name\r\n              });\r\n            }\r\n            break;\r\n          case \"3\"://几何数据展示\r\n            if (obj.trigger) {\r\n              this.geomDataFn(obj);\r\n            } else {\r\n              this.removeLayer({\r\n                layer_name: obj.layer_name\r\n              });\r\n            }\r\n            break;\r\n          case \"4\"://采集的树数据\r\n            if (obj.trigger) {\r\n              this.markerDataFn(obj);\r\n            } else {\r\n              this.removeLayer({\r\n                layer_name: obj.layer_name\r\n              });\r\n            }\r\n            break;\r\n        }\r\n      },\r\n      queryVicinityPrintFn(obj) { //树木范围查询显示\r\n        let _val = {\r\n          lng: null,\r\n          lat: null,\r\n          distance: null,\r\n          layer_name: \"\",\r\n          data_maker_iconUrl: \"\",\r\n          maker_titleKey: \"\",\r\n          clusters_color: \"\",\r\n        };\r\n\r\n        for (let k in _val) {\r\n          if (obj[k]) {\r\n            _val[k] = obj[k];\r\n          }\r\n        }\r\n\r\n        queryVicinityPrint({\r\n          params: {\r\n            longitude: _val.lng ? _val.lng : 114.03188276054428,\r\n            latitude: _val.lat ? _val.lat : 22.619840297782094,\r\n            distance: _val.distance ? _val.distance : 10000\r\n          }\r\n        }).then(response => {\r\n          let _data = [];\r\n          if (response.statusCode === 200) {\r\n            response.data.forEach(function (_obj) {\r\n              _obj.icon = _val.data_maker_iconUrl;\r\n            });\r\n            _data = response.data;\r\n          }\r\n          let _layer = mp.clustersFn(_data, {\r\n            type: _val.layer_name,\r\n            titleKey: _val.maker_titleKey,\r\n            iconUrlKey: \"icon\"\r\n          }, _val.clusters_color, 30);\r\n          this.addLayer({\r\n            layer: _layer.layer\r\n          });\r\n        });\r\n      },\r\n      markerDataFn(obj) {\r\n        let _val = {\r\n          api_name: \"\",\r\n          data_url: \"\",\r\n          params: {},\r\n          layer_name: \"\",\r\n          data_maker_iconUrl: \"\",\r\n          maker_titleKey: \"\",\r\n          clusters_color: \"\",\r\n        };\r\n        for (let k in _val) {\r\n          if (obj[k]) {\r\n            _val[k] = obj[k];\r\n          }\r\n        }\r\n\r\n        // params\r\n        for (let k in obj) {\r\n          let _params = k.split(\"_\");\r\n          if (_params[0] === \"params\") {\r\n            _val.params[_params[1]] = obj[k];\r\n          }\r\n        }\r\n\r\n        if (_val.api_name === \"queryVicinityPrint\") {\r\n\r\n        } else if (_val.api_name === \"marker\") {\r\n\r\n          marker({\r\n            url: _val.data_url,\r\n            params: _val.params\r\n          }).then(response => {\r\n            let _data = [];\r\n            if (response.statusCode === 200) {\r\n              response.data.forEach(function (_obj) {\r\n                _obj.icon = _val.data_maker_iconUrl;\r\n              });\r\n              _data = response.data;\r\n              console.log(_val);\r\n              console.log(_data);\r\n            }\r\n            let _layer = mp.clustersFn(_data, {\r\n              type: _val.layer_name,\r\n              titleKey: _val.maker_titleKey,\r\n              iconUrlKey: \"icon\"\r\n            }, _val.clusters_color, 50);\r\n            this.addLayer({\r\n              layer: _layer.layer\r\n            });\r\n\r\n            this.bus.$emit(\"scene_data_emTabs\", {\r\n              fn:\"addTab\",\r\n              name:_val.layer_name,\r\n              title:_val.layer_name\r\n            });\r\n          });\r\n\r\n        }\r\n\r\n      },\r\n      geomDataFn(obj) { //矢量数据展示\r\n        let _val = {\r\n          data_url: \"\",\r\n          params: {},\r\n          layer_name: \"\",\r\n          api_name: \"\",\r\n          geomType: \"\",\r\n          geom_style: \"1\",//几何样式类型\r\n          geom_titleKey: \"\",\r\n          strokeWidth: 2,\r\n          strokeColor: \"[0, 255, 0, 1.0]\",\r\n          fillColor: \"[0, 0, 255, 1.0]\"\r\n        };\r\n\r\n        for (let k in _val) {\r\n          if (obj[k]) {\r\n            _val[k] = obj[k];\r\n          }\r\n        }\r\n\r\n        // 解析(params_xx)\r\n        for (let k in obj) {\r\n          let _params = k.split(\"_\");\r\n          if (_params[0] === \"params\") {\r\n            _val.params[_params[1]] = obj[k];\r\n          }\r\n        }\r\n\r\n        if (_val.api_name === \"geom\") {\r\n\r\n          geom({\r\n            url: _val.data_url,\r\n            params: _val.params\r\n          }).then(response => {\r\n            let _data = [];\r\n            if (response.statusCode === 200) {\r\n              response.data.forEach(function (_obj) {\r\n\r\n                let _coordinates = null;\r\n                if (_val.geomType === \"line\") {\r\n                  _coordinates = \"{\\\"data\\\":[[\" + _obj.gpsLongitude + \",\" + _obj.gpsLatitude + \"],[114.00686770840161,22.644074037075697],[114.00888549133455,22.64434053670835],[114.00663928014505,22.646929390282693]]}\";\r\n                  _coordinates = JSON.parse(_coordinates);\r\n                  _obj.coordinates = _coordinates.data;\r\n                } else if (_val.geomType === \"polygon\") {\r\n                  _coordinates = \"{\\\"data\\\":[[[\" + _obj.gpsLongitude + \",\" + _obj.gpsLatitude + \"],[114.00686770840161,22.644074037075697],[114.00888549133455,22.64434053670835],[114.00663928014505,22.646929390282693]]]}\";\r\n                  _coordinates = JSON.parse(_coordinates);\r\n                  _obj.coordinates = _coordinates.data;\r\n                }\r\n\r\n                /* if(_obj.coordinates){\r\n                  let _coordinates = JSON.parse(_obj.coordinates);\r\n                  _obj.coordinates=_coordinates.data;\r\n                }*/\r\n              });\r\n              _data = response.data;\r\n            }\r\n            let _layer = mp.layerFN(_data, {\r\n              type: _val.layer_name,\r\n              geomType: _val.geomType\r\n            }, {\r\n              type: _val.geom_style,\r\n              titleKey: _val.geom_titleKey,//标题\r\n              strokeWidth: _val.strokeWidth,\r\n              strokeColor: _val.strokeColor,\r\n              fillColor: _val.fillColor\r\n            });\r\n            this.addLayer({\r\n              layer: _layer.layer\r\n            });\r\n          });\r\n        }\r\n\r\n      }\r\n    },\r\n    created() {\r\n      this.$store.commit(\"scene/set_type\", this.id);//\r\n      this.$store.commit(\"scene/set_toolbar\", [\r\n        {\r\n          id: \"tool_flyToScene\",\r\n          value: \"场景\",\r\n          control_type: \"scene\",\r\n          icon: \"el-icon-scene\",\r\n          control_id: \"\",\r\n          fn: \"toScene\",\r\n          trigger: \"none\"\r\n        },\r\n        {\r\n          id: \"tool_coordinates\",\r\n          value: \"坐标\",\r\n          control_type: \"scene\",\r\n          icon: \"el-icon-coordinates\",\r\n          control_id: \"\",\r\n          fn: \"xyz\",\r\n          trigger: true\r\n        },\r\n        {\r\n          id: \"tool_data\",\r\n          value: \"数据\",\r\n          control_type: \"tool\",\r\n          icon: \"el-icon-data\",\r\n          control_id: \"scene_data\",\r\n          fn: \"handleData\",\r\n          trigger: true\r\n        },\r\n        {\r\n          id: \"tool_distance\",\r\n          value: \"距离\",\r\n          control_type: \"scene\",\r\n          icon: \"el-icon-distance\",\r\n          control_id: \"\",\r\n          fn: \"measure_drawLine\",\r\n          trigger: \"none\"\r\n        },\r\n        {\r\n          id: \"tool_area\",\r\n          value: \"面积\",\r\n          control_type: \"scene\",\r\n          icon: \"el-icon-area\",\r\n          control_id: \"\",\r\n          fn: \"measure_drawPloy\",\r\n          trigger: \"none\"\r\n        },\r\n        {\r\n          id: \"tool_label\",\r\n          value: \"清除\",\r\n          control_type: \"scene\",\r\n          icon: \"el-icon-remove2\",\r\n          control_id: \"\",\r\n          fn: \"measure_clear\",\r\n          trigger: \"none\"\r\n        }\r\n      ]);//设置场景工具面板\r\n      //初始化二维场景\r\n      mp.openScene(this.id);\r\n    },\r\n    mounted() {\r\n      this.init();\r\n      this.bus.$on(this.id, obj => {\r\n        this[obj.fn](obj);\r\n      });\r\n    },\r\n    beforeDestroy() {\r\n      this.bus.$off(this.id);\r\n    }\r\n  };\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n  @import \"map\";\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/map/map.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"map\"},[_c('div',{attrs:{\"id\":_vm.id}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5c89e742\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/map/map.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5c89e742\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./map.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./map.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./map.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5c89e742\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./map.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5c89e742\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/map/map.vue\n// module id = null\n// module chunks = ","import request from '@/utils/request'\r\n\r\n\r\nexport function geom(obj) {\r\n  return request({\r\n    url:obj.url,\r\n    method: 'get',\r\n    params:obj.params\r\n  })\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/geom.js","import request from '@/utils/request'\r\n\r\n\r\nexport function marker(obj) {\r\n  return request({\r\n    url:obj.url,\r\n    method: 'get',\r\n    params:obj.params\r\n  })\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/marker.js","import request from '@/utils/request'\r\n\r\n\r\nexport function queryVicinityPrint(obj) {\r\n  return request({\r\n    url:\"/gardens/tree/queryVicinityPrint\",\r\n    method: 'get',\r\n    params:obj.params\r\n  })\r\n}\r\n\r\nexport function findOne(obj) {\r\n  return request({\r\n    url:\"/gardens/tree/findOne\",\r\n    method: 'get',\r\n    params:obj.params\r\n  })\r\n}\r\n\r\nexport function queryAllcount(obj) {\r\n  return request({\r\n    url:\"/gardens/tree/queryAllcount\",\r\n    method: 'get',\r\n    params:obj.params\r\n  })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/tree.js"],"sourceRoot":""}